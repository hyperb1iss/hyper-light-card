function t(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function e(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function n(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const r=globalThis,o=r.ShadowRoot&&(void 0===r.ShadyCSS||r.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,i=Symbol(),a=new WeakMap;let s=class{constructor(t,e,n){if(this._$cssResult$=!0,n!==i)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(o&&void 0===t){const n=void 0!==e&&1===e.length;n&&(t=a.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),n&&a.set(e,t))}return t}toString(){return this.cssText}};const c=t=>new s("string"==typeof t?t:t+"",void 0,i),l=(t,...e)=>{const n=1===t.length?t[0]:e.reduce(((e,n,r)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[r+1]),t[0]);return new s(n,t,i)},h=o?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const n of t.cssRules)e+=n.cssText;return c(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,{is:u,defineProperty:f,getOwnPropertyDescriptor:d,getOwnPropertyNames:p,getOwnPropertySymbols:g,getPrototypeOf:b}=Object,v=globalThis,y=v.trustedTypes,m=y?y.emptyScript:"",_=v.reactiveElementPolyfillSupport,w=(t,e)=>t,x={toAttribute(t,e){switch(e){case Boolean:t=t?m:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=null!==t;break;case Number:n=null===t?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch(t){n=null}}return n}},k=(t,e)=>!u(t,e),$={attribute:!0,type:String,converter:x,reflect:!1,hasChanged:k};Symbol.metadata??=Symbol("metadata"),v.litPropertyMetadata??=new WeakMap;class A extends HTMLElement{static addInitializer(t){this._$Ei(),(this.l??=[]).push(t)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(t,e=$){if(e.state&&(e.attribute=!1),this._$Ei(),this.elementProperties.set(t,e),!e.noAccessor){const n=Symbol(),r=this.getPropertyDescriptor(t,n,e);void 0!==r&&f(this.prototype,t,r)}}static getPropertyDescriptor(t,e,n){const{get:r,set:o}=d(this.prototype,t)??{get(){return this[e]},set(t){this[e]=t}};return{get(){return r?.call(this)},set(e){const i=r?.call(this);o.call(this,e),this.requestUpdate(t,i,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)??$}static _$Ei(){if(this.hasOwnProperty(w("elementProperties")))return;const t=b(this);t.finalize(),void 0!==t.l&&(this.l=[...t.l]),this.elementProperties=new Map(t.elementProperties)}static finalize(){if(this.hasOwnProperty(w("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(w("properties"))){const t=this.properties,e=[...p(t),...g(t)];for(const n of e)this.createProperty(n,t[n])}const t=this[Symbol.metadata];if(null!==t){const e=litPropertyMetadata.get(t);if(void 0!==e)for(const[t,n]of e)this.elementProperties.set(t,n)}this._$Eh=new Map;for(const[t,e]of this.elementProperties){const n=this._$Eu(t,e);void 0!==n&&this._$Eh.set(n,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const n=new Set(t.flat(1/0).reverse());for(const t of n)e.unshift(h(t))}else void 0!==t&&e.push(h(t));return e}static _$Eu(t,e){const n=e.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof t?t.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((t=>t(this)))}addController(t){(this._$EO??=new Set).add(t),void 0!==this.renderRoot&&this.isConnected&&t.hostConnected?.()}removeController(t){this._$EO?.delete(t)}_$E_(){const t=new Map,e=this.constructor.elementProperties;for(const n of e.keys())this.hasOwnProperty(n)&&(t.set(n,this[n]),delete this[n]);t.size>0&&(this._$Ep=t)}createRenderRoot(){const t=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((t,e)=>{if(o)t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet));else for(const n of e){const e=document.createElement("style"),o=r.litNonce;void 0!==o&&e.setAttribute("nonce",o),e.textContent=n.cssText,t.appendChild(e)}})(t,this.constructor.elementStyles),t}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((t=>t.hostConnected?.()))}enableUpdating(t){}disconnectedCallback(){this._$EO?.forEach((t=>t.hostDisconnected?.()))}attributeChangedCallback(t,e,n){this._$AK(t,n)}_$EC(t,e){const n=this.constructor.elementProperties.get(t),r=this.constructor._$Eu(t,n);if(void 0!==r&&!0===n.reflect){const o=(void 0!==n.converter?.toAttribute?n.converter:x).toAttribute(e,n.type);this._$Em=t,null==o?this.removeAttribute(r):this.setAttribute(r,o),this._$Em=null}}_$AK(t,e){const n=this.constructor,r=n._$Eh.get(t);if(void 0!==r&&this._$Em!==r){const t=n.getPropertyOptions(r),o="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==t.converter?.fromAttribute?t.converter:x;this._$Em=r,this[r]=o.fromAttribute(e,t.type),this._$Em=null}}requestUpdate(t,e,n){if(void 0!==t){if(n??=this.constructor.getPropertyOptions(t),!(n.hasChanged??k)(this[t],e))return;this.P(t,e,n)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(t,e,n){this._$AL.has(t)||this._$AL.set(t,e),!0===n.reflect&&this._$Em!==t&&(this._$Ej??=new Set).add(t)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[t,e]of this._$Ep)this[t]=e;this._$Ep=void 0}const t=this.constructor.elementProperties;if(t.size>0)for(const[e,n]of t)!0!==n.wrapped||this._$AL.has(e)||void 0===this[e]||this.P(e,this[e],n)}let t=!1;const e=this._$AL;try{t=this.shouldUpdate(e),t?(this.willUpdate(e),this._$EO?.forEach((t=>t.hostUpdate?.())),this.update(e)):this._$EU()}catch(e){throw t=!1,this._$EU(),e}t&&this._$AE(e)}willUpdate(t){}_$AE(t){this._$EO?.forEach((t=>t.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(t){return!0}update(t){this._$Ej&&=this._$Ej.forEach((t=>this._$EC(t,this[t]))),this._$EU()}updated(t){}firstUpdated(t){}}A.elementStyles=[],A.shadowRootOptions={mode:"open"},A[w("elementProperties")]=new Map,A[w("finalized")]=new Map,_?.({ReactiveElement:A}),(v.reactiveElementVersions??=[]).push("2.0.4");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const C=globalThis,E=C.trustedTypes,M=E?E.createPolicy("lit-html",{createHTML:t=>t}):void 0,O="$lit$",S=`lit$${Math.random().toFixed(9).slice(2)}$`,P="?"+S,L=`<${P}>`,N=document,H=()=>N.createComment(""),U=t=>null===t||"object"!=typeof t&&"function"!=typeof t,j=Array.isArray,R="[ \t\n\f\r]",T=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,z=/-->/g,D=/>/g,I=RegExp(`>|${R}(?:([^\\s"'>=/]+)(${R}*=${R}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),B=/'/g,q=/"/g,F=/^(?:script|style|textarea|title)$/i,G=(t=>(e,...n)=>({_$litType$:t,strings:e,values:n}))(1),Y=Symbol.for("lit-noChange"),V=Symbol.for("lit-nothing"),W=new WeakMap,X=N.createTreeWalker(N,129);function Z(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==M?M.createHTML(e):e}const K=(t,e)=>{const n=t.length-1,r=[];let o,i=2===e?"<svg>":"",a=T;for(let e=0;e<n;e++){const n=t[e];let s,c,l=-1,h=0;for(;h<n.length&&(a.lastIndex=h,c=a.exec(n),null!==c);)h=a.lastIndex,a===T?"!--"===c[1]?a=z:void 0!==c[1]?a=D:void 0!==c[2]?(F.test(c[2])&&(o=RegExp("</"+c[2],"g")),a=I):void 0!==c[3]&&(a=I):a===I?">"===c[0]?(a=o??T,l=-1):void 0===c[1]?l=-2:(l=a.lastIndex-c[2].length,s=c[1],a=void 0===c[3]?I:'"'===c[3]?q:B):a===q||a===B?a=I:a===z||a===D?a=T:(a=I,o=void 0);const u=a===I&&t[e+1].startsWith("/>")?" ":"";i+=a===T?n+L:l>=0?(r.push(s),n.slice(0,l)+O+n.slice(l)+S+u):n+S+(-2===l?e:u)}return[Z(t,i+(t[n]||"<?>")+(2===e?"</svg>":"")),r]};class J{constructor({strings:t,_$litType$:e},n){let r;this.parts=[];let o=0,i=0;const a=t.length-1,s=this.parts,[c,l]=K(t,e);if(this.el=J.createElement(c,n),X.currentNode=this.el.content,2===e){const t=this.el.content.firstChild;t.replaceWith(...t.childNodes)}for(;null!==(r=X.nextNode())&&s.length<a;){if(1===r.nodeType){if(r.hasAttributes())for(const t of r.getAttributeNames())if(t.endsWith(O)){const e=l[i++],n=r.getAttribute(t).split(S),a=/([.?@])?(.*)/.exec(e);s.push({type:1,index:o,name:a[2],strings:n,ctor:"."===a[1]?rt:"?"===a[1]?ot:"@"===a[1]?it:nt}),r.removeAttribute(t)}else t.startsWith(S)&&(s.push({type:6,index:o}),r.removeAttribute(t));if(F.test(r.tagName)){const t=r.textContent.split(S),e=t.length-1;if(e>0){r.textContent=E?E.emptyScript:"";for(let n=0;n<e;n++)r.append(t[n],H()),X.nextNode(),s.push({type:2,index:++o});r.append(t[e],H())}}}else if(8===r.nodeType)if(r.data===P)s.push({type:2,index:o});else{let t=-1;for(;-1!==(t=r.data.indexOf(S,t+1));)s.push({type:7,index:o}),t+=S.length-1}o++}}static createElement(t,e){const n=N.createElement("template");return n.innerHTML=t,n}}function Q(t,e,n=t,r){if(e===Y)return e;let o=void 0!==r?n._$Co?.[r]:n._$Cl;const i=U(e)?void 0:e._$litDirective$;return o?.constructor!==i&&(o?._$AO?.(!1),void 0===i?o=void 0:(o=new i(t),o._$AT(t,n,r)),void 0!==r?(n._$Co??=[])[r]=o:n._$Cl=o),void 0!==o&&(e=Q(t,o._$AS(t,e.values),o,r)),e}class tt{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){const{el:{content:e},parts:n}=this._$AD,r=(t?.creationScope??N).importNode(e,!0);X.currentNode=r;let o=X.nextNode(),i=0,a=0,s=n[0];for(;void 0!==s;){if(i===s.index){let e;2===s.type?e=new et(o,o.nextSibling,this,t):1===s.type?e=new s.ctor(o,s.name,s.strings,this,t):6===s.type&&(e=new at(o,this,t)),this._$AV.push(e),s=n[++a]}i!==s?.index&&(o=X.nextNode(),i++)}return X.currentNode=N,r}p(t){let e=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++}}class et{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(t,e,n,r){this.type=2,this._$AH=V,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=r,this._$Cv=r?.isConnected??!0}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t?.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=Q(this,t,e),U(t)?t===V||null==t||""===t?(this._$AH!==V&&this._$AR(),this._$AH=V):t!==this._$AH&&t!==Y&&this._(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):(t=>j(t)||"function"==typeof t?.[Symbol.iterator])(t)?this.k(t):this._(t)}S(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.S(t))}_(t){this._$AH!==V&&U(this._$AH)?this._$AA.nextSibling.data=t:this.T(N.createTextNode(t)),this._$AH=t}$(t){const{values:e,_$litType$:n}=t,r="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=J.createElement(Z(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===r)this._$AH.p(e);else{const t=new tt(r,this),n=t.u(this.options);t.p(e),this.T(n),this._$AH=t}}_$AC(t){let e=W.get(t.strings);return void 0===e&&W.set(t.strings,e=new J(t)),e}k(t){j(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let n,r=0;for(const o of t)r===e.length?e.push(n=new et(this.S(H()),this.S(H()),this,this.options)):n=e[r],n._$AI(o),r++;r<e.length&&(this._$AR(n&&n._$AB.nextSibling,r),e.length=r)}_$AR(t=this._$AA.nextSibling,e){for(this._$AP?.(!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){void 0===this._$AM&&(this._$Cv=t,this._$AP?.(t))}}class nt{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(t,e,n,r,o){this.type=1,this._$AH=V,this._$AN=void 0,this.element=t,this.name=e,this._$AM=r,this.options=o,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=V}_$AI(t,e=this,n,r){const o=this.strings;let i=!1;if(void 0===o)t=Q(this,t,e,0),i=!U(t)||t!==this._$AH&&t!==Y,i&&(this._$AH=t);else{const r=t;let a,s;for(t=o[0],a=0;a<o.length-1;a++)s=Q(this,r[n+a],e,a),s===Y&&(s=this._$AH[a]),i||=!U(s)||s!==this._$AH[a],s===V?t=V:t!==V&&(t+=(s??"")+o[a+1]),this._$AH[a]=s}i&&!r&&this.j(t)}j(t){t===V?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class rt extends nt{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===V?void 0:t}}class ot extends nt{constructor(){super(...arguments),this.type=4}j(t){this.element.toggleAttribute(this.name,!!t&&t!==V)}}class it extends nt{constructor(t,e,n,r,o){super(t,e,n,r,o),this.type=5}_$AI(t,e=this){if((t=Q(this,t,e,0)??V)===Y)return;const n=this._$AH,r=t===V&&n!==V||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,o=t!==V&&(n===V||r);r&&this.element.removeEventListener(this.name,this,n),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,t):this._$AH.handleEvent(t)}}class at{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(t){Q(this,t)}}const st=C.litHtmlPolyfillSupport;st?.(J,et),(C.litHtmlVersions??=[]).push("3.1.4");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
class ct extends A{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const t=super.createRenderRoot();return this.renderOptions.renderBefore??=t.firstChild,t}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,n)=>{const r=n?.renderBefore??e;let o=r._$litPart$;if(void 0===o){const t=n?.renderBefore??null;r._$litPart$=o=new et(e.insertBefore(H(),t),t,void 0,n??{})}return o._$AI(t),o})(e,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Y}}ct._$litElement$=!0,ct.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:ct});const lt=globalThis.litElementPolyfillSupport;lt?.({LitElement:ct}),(globalThis.litElementVersions??=[]).push("4.0.6");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const ht={attribute:!0,type:String,converter:x,reflect:!1,hasChanged:k},ut=(t=ht,e,n)=>{const{kind:r,metadata:o}=n;let i=globalThis.litPropertyMetadata.get(o);if(void 0===i&&globalThis.litPropertyMetadata.set(o,i=new Map),i.set(n.name,t),"accessor"===r){const{name:r}=n;return{set(n){const o=e.get.call(this);e.set.call(this,n),this.requestUpdate(r,o,t)},init(e){return void 0!==e&&this.P(r,void 0,t),e}}}if("setter"===r){const{name:r}=n;return function(n){const o=this[r];e.call(this,n),this.requestUpdate(r,o,t)}}throw Error("Unsupported decorator location: "+r)};function ft(t){return(e,n)=>"object"==typeof n?ut(t,e,n):((t,e,n)=>{const r=e.hasOwnProperty(n);return e.constructor.createProperty(n,r?{...t,wrapped:!0}:t),r?Object.getOwnPropertyDescriptor(e,n):void 0})(t,e,n)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const dt=1;let pt=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,n){this._$Ct=t,this._$AM=e,this._$Ci=n}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}};
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const gt="important",bt=" !"+gt,vt=(t=>(...e)=>({_$litDirective$:t,values:e}))(class extends pt{constructor(t){if(super(t),t.type!==dt||"style"!==t.name||t.strings?.length>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,n)=>{const r=t[n];return null==r?e:e+`${n=n.includes("-")?n:n.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`}),"")}update(t,[e]){const{style:n}=t.element;if(void 0===this.ft)return this.ft=new Set(Object.keys(e)),this.render(e);for(const t of this.ft)null==e[t]&&(this.ft.delete(t),t.includes("-")?n.removeProperty(t):n[t]=null);for(const t in e){const r=e[t];if(null!=r){this.ft.add(t);const e="string"==typeof r&&r.endsWith(bt);t.includes("-")||e?n.setProperty(t,e?r.slice(0,-11):r,e?gt:""):n[t]=r}}return Y}});var yt=function(t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=t.width,this.height=this.canvas.height=t.height,this.context.drawImage(t,0,0,this.width,this.height)};yt.prototype.getPixelCount=function(){return this.width*this.height},yt.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};var mt=function(){};if(mt.prototype.getColor=function(t,e){return this.getPalette(t,5,e)[0]},mt.prototype.getPalette=function(t,e,n){(void 0===e||e<2||e>256)&&(e=10),(void 0===n||n<1)&&(n=10);for(var r,o,i,a,s=new yt(t),c=s.getImageData().data,l=s.getPixelCount(),h=[],u=0;u<l;u+=n)o=c[0+(r=4*u)],i=c[r+1],a=c[r+2],c[r+3]>=125&&(o>250&&i>250&&a>250||h.push([o,i,a]));var f=wt.quantize(h,e);return f?f.palette():null},mt.prototype.getColorFromUrl=function(t,e,n){var r=document.createElement("img"),o=this;r.addEventListener("load",(function(){var i=o.getPalette(r,5,n);e(i[0],t)})),r.src=t},mt.prototype.getImageData=function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){if(200==this.status){var t=new Uint8Array(this.response);r=t.length;for(var n=new Array(r),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);var o=n.join(""),i=window.btoa(o);e("data:image/png;base64,"+i)}},n.send()},mt.prototype.getColorAsync=function(t,e,n){var r=this;this.getImageData(t,(function(t){var o=document.createElement("img");o.addEventListener("load",(function(){var t=r.getPalette(o,5,n);e(t[0],this)})),o.src=t}))},!_t)var _t={map:function(t,e){var n={};return e?t.map((function(t,r){return n.index=r,e.call(n,t)})):t.slice()},naturalOrder:function(t,e){return t<e?-1:t>e?1:0},sum:function(t,e){var n={};return t.reduce(e?function(t,r,o){return n.index=o,t+e.call(n,r)}:function(t,e){return t+e},0)},max:function(t,e){return Math.max.apply(null,e?_t.map(t,e):t)}};var wt=function(){var t=5,e=8-t;function n(e,n,r){return(e<<2*t)+(n<<t)+r}function r(t){var e=[],n=!1;function r(){e.sort(t),n=!0}return{push:function(t){e.push(t),n=!1},peek:function(t){return n||r(),void 0===t&&(t=e.length-1),e[t]},pop:function(){return n||r(),e.pop()},size:function(){return e.length},map:function(t){return e.map(t)},debug:function(){return n||r(),e}}}function o(t,e,n,r,o,i,a){this.r1=t,this.r2=e,this.g1=n,this.g2=r,this.b1=o,this.b2=i,this.histo=a}function i(){this.vboxes=new r((function(t,e){return _t.naturalOrder(t.vbox.count()*t.vbox.volume(),e.vbox.count()*e.vbox.volume())}))}function a(t,e){if(e.count()){var r=e.r2-e.r1+1,o=e.g2-e.g1+1,i=_t.max([r,o,e.b2-e.b1+1]);if(1==e.count())return[e.copy()];var a,s,c,l,h=0,u=[],f=[];if(i==r)for(a=e.r1;a<=e.r2;a++){for(l=0,s=e.g1;s<=e.g2;s++)for(c=e.b1;c<=e.b2;c++)l+=t[n(a,s,c)]||0;u[a]=h+=l}else if(i==o)for(a=e.g1;a<=e.g2;a++){for(l=0,s=e.r1;s<=e.r2;s++)for(c=e.b1;c<=e.b2;c++)l+=t[n(s,a,c)]||0;u[a]=h+=l}else for(a=e.b1;a<=e.b2;a++){for(l=0,s=e.r1;s<=e.r2;s++)for(c=e.g1;c<=e.g2;c++)l+=t[n(s,c,a)]||0;u[a]=h+=l}return u.forEach((function(t,e){f[e]=h-t})),function(t){var n,r,o,i,s,c=t+"1",l=t+"2",d=0;for(a=e[c];a<=e[l];a++)if(u[a]>h/2){for(o=e.copy(),i=e.copy(),s=(n=a-e[c])<=(r=e[l]-a)?Math.min(e[l]-1,~~(a+r/2)):Math.max(e[c],~~(a-1-n/2));!u[s];)s++;for(d=f[s];!d&&u[s-1];)d=f[--s];return o[l]=s,i[c]=o[l]+1,[o,i]}}(i==r?"r":i==o?"g":"b")}}return o.prototype={volume:function(t){return this._volume&&!t||(this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1)),this._volume},count:function(t){var e=this.histo;if(!this._count_set||t){var r,o,i,a=0;for(r=this.r1;r<=this.r2;r++)for(o=this.g1;o<=this.g2;o++)for(i=this.b1;i<=this.b2;i++)a+=e[n(r,o,i)]||0;this._count=a,this._count_set=!0}return this._count},copy:function(){return new o(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},avg:function(e){var r=this.histo;if(!this._avg||e){var o,i,a,s,c=0,l=1<<8-t,h=0,u=0,f=0;for(i=this.r1;i<=this.r2;i++)for(a=this.g1;a<=this.g2;a++)for(s=this.b1;s<=this.b2;s++)c+=o=r[n(i,a,s)]||0,h+=o*(i+.5)*l,u+=o*(a+.5)*l,f+=o*(s+.5)*l;this._avg=c?[~~(h/c),~~(u/c),~~(f/c)]:[~~(l*(this.r1+this.r2+1)/2),~~(l*(this.g1+this.g2+1)/2),~~(l*(this.b1+this.b2+1)/2)]}return this._avg},contains:function(t){var n=t[0]>>e,r=t[1]>>e,o=t[2]>>e;return n>=this.r1&&n<=this.r2&&r>=this.g1&&r<=this.g2&&o>=this.b1&&o<=this.b2}},i.prototype={push:function(t){this.vboxes.push({vbox:t,color:t.avg()})},palette:function(){return this.vboxes.map((function(t){return t.color}))},size:function(){return this.vboxes.size()},map:function(t){for(var e=this.vboxes,n=0;n<e.size();n++)if(e.peek(n).vbox.contains(t))return e.peek(n).color;return this.nearest(t)},nearest:function(t){for(var e,n,r,o=this.vboxes,i=0;i<o.size();i++)((n=Math.sqrt(Math.pow(t[0]-o.peek(i).color[0],2)+Math.pow(t[1]-o.peek(i).color[1],2)+Math.pow(t[2]-o.peek(i).color[2],2)))<e||void 0===e)&&(e=n,r=o.peek(i).color);return r},forcebw:function(){var t=this.vboxes;t.sort((function(t,e){return _t.naturalOrder(_t.sum(t.color),_t.sum(e.color))}));var e=t[0].color;e[0]<5&&e[1]<5&&e[2]<5&&(t[0].color=[0,0,0]);var n=t.length-1,r=t[n].color;r[0]>251&&r[1]>251&&r[2]>251&&(t[n].color=[255,255,255])}},{quantize:function(s,c){if(!s.length||c<2||c>256)return!1;var l=function(r){var o,i=new Array(1<<3*t);return r.forEach((function(t){o=n(t[0]>>e,t[1]>>e,t[2]>>e),i[o]=(i[o]||0)+1})),i}(s);l.forEach((function(){}));var h=function(t,n){var r,i,a,s=1e6,c=0,l=1e6,h=0,u=1e6,f=0;return t.forEach((function(t){(r=t[0]>>e)<s?s=r:r>c&&(c=r),(i=t[1]>>e)<l?l=i:i>h&&(h=i),(a=t[2]>>e)<u?u=a:a>f&&(f=a)})),new o(s,c,l,h,u,f,n)}(s,l),u=new r((function(t,e){return _t.naturalOrder(t.count(),e.count())}));function f(t,e){for(var n,r=1,o=0;o<1e3;)if((n=t.pop()).count()){var i=a(l,n),s=i[0],c=i[1];if(!s)return;if(t.push(s),c&&(t.push(c),r++),r>=e)return;if(o++>1e3)return}else t.push(n),o++}u.push(h),f(u,.75*c);for(var d=new r((function(t,e){return _t.naturalOrder(t.count()*t.volume(),e.count()*e.volume())}));u.size();)d.push(u.pop());f(d,c-d.size());for(var p=new i;d.size();)p.push(d.pop());return p}}}();"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function xt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kt={exports:{}};
/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */kt.exports=function(){for(var t=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),t<e?e:t>n?n:t},e=t,n=function(t){t._clipped=!1,t._unclipped=t.slice(0);for(var n=0;n<=3;n++)n<3?((t[n]<0||t[n]>255)&&(t._clipped=!0),t[n]=e(t[n],0,255)):3===n&&(t[n]=e(t[n],0,1));return t},r={},o=0,i=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];o<i.length;o+=1){var a=i[o];r["[object "+a+"]"]=a.toLowerCase()}var s=function(t){return r[Object.prototype.toString.call(t)]||"object"},c=s,l=function(t,e){return void 0===e&&(e=null),t.length>=3?Array.prototype.slice.call(t):"object"==c(t[0])&&e?e.split("").filter((function(e){return void 0!==t[0][e]})).map((function(e){return t[0][e]})):t[0]},h=s,u=function(t){if(t.length<2)return null;var e=t.length-1;return"string"==h(t[e])?t[e].toLowerCase():null},f=Math.PI,d={clip_rgb:n,limit:t,type:s,unpack:l,last:u,PI:f,TWOPI:2*f,PITHIRD:f/3,DEG2RAD:f/180,RAD2DEG:180/f},p={format:{},autodetect:[]},g=d.last,b=d.clip_rgb,v=d.type,y=p,m=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=this;if("object"===v(t[0])&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];var r=g(t),o=!1;if(!r){o=!0,y.sorted||(y.autodetect=y.autodetect.sort((function(t,e){return e.p-t.p})),y.sorted=!0);for(var i=0,a=y.autodetect;i<a.length;i+=1){var s=a[i];if(r=s.test.apply(s,t))break}}if(!y.format[r])throw new Error("unknown format: "+t);var c=y.format[r].apply(null,o?t:t.slice(0,-1));n._rgb=b(c),3===n._rgb.length&&n._rgb.push(1)};m.prototype.toString=function(){return"function"==v(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var _=m,w=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(w.Color,[null].concat(t)))};w.Color=_,w.version="2.4.2";var x=w,k=d.unpack,$=Math.max,A=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=k(t,"rgb"),r=n[0],o=n[1],i=n[2],a=1-$(r/=255,$(o/=255,i/=255)),s=a<1?1/(1-a):0;return[(1-r-a)*s,(1-o-a)*s,(1-i-a)*s,a]},C=A,E=d.unpack,M=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=E(t,"cmyk"))[0],r=t[1],o=t[2],i=t[3],a=t.length>4?t[4]:1;return 1===i?[0,0,0,a]:[n>=1?0:255*(1-n)*(1-i),r>=1?0:255*(1-r)*(1-i),o>=1?0:255*(1-o)*(1-i),a]},O=M,S=x,P=_,L=p,N=d.unpack,H=d.type,U=C;P.prototype.cmyk=function(){return U(this._rgb)},S.cmyk=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(P,[null].concat(t,["cmyk"])))},L.format.cmyk=O,L.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=N(t,"cmyk"),"array"===H(t)&&4===t.length)return"cmyk"}});var j=d.unpack,R=d.last,T=function(t){return Math.round(100*t)/100},z=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=j(t,"hsla"),r=R(t)||"lsa";return n[0]=T(n[0]||0),n[1]=T(100*n[1])+"%",n[2]=T(100*n[2])+"%","hsla"===r||n.length>3&&n[3]<1?(n[3]=n.length>3?n[3]:1,r="hsla"):n.length=3,r+"("+n.join(",")+")"},D=z,I=d.unpack,B=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=I(t,"rgba"))[0],r=t[1],o=t[2];n/=255,r/=255,o/=255;var i,a,s=Math.min(n,r,o),c=Math.max(n,r,o),l=(c+s)/2;return c===s?(i=0,a=Number.NaN):i=l<.5?(c-s)/(c+s):(c-s)/(2-c-s),n==c?a=(r-o)/(c-s):r==c?a=2+(o-n)/(c-s):o==c&&(a=4+(n-r)/(c-s)),(a*=60)<0&&(a+=360),t.length>3&&void 0!==t[3]?[a,i,l,t[3]]:[a,i,l]},q=B,F=d.unpack,G=d.last,Y=D,V=q,W=Math.round,X=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=F(t,"rgba"),r=G(t)||"rgb";return"hsl"==r.substr(0,3)?Y(V(n),r):(n[0]=W(n[0]),n[1]=W(n[1]),n[2]=W(n[2]),("rgba"===r||n.length>3&&n[3]<1)&&(n[3]=n.length>3?n[3]:1,r="rgba"),r+"("+n.slice(0,"rgb"===r?3:4).join(",")+")")},Z=X,K=d.unpack,J=Math.round,Q=function(){for(var t,e=[],n=arguments.length;n--;)e[n]=arguments[n];var r,o,i,a=(e=K(e,"hsl"))[0],s=e[1],c=e[2];if(0===s)r=o=i=255*c;else{var l=[0,0,0],h=[0,0,0],u=c<.5?c*(1+s):c+s-c*s,f=2*c-u,d=a/360;l[0]=d+1/3,l[1]=d,l[2]=d-1/3;for(var p=0;p<3;p++)l[p]<0&&(l[p]+=1),l[p]>1&&(l[p]-=1),6*l[p]<1?h[p]=f+6*(u-f)*l[p]:2*l[p]<1?h[p]=u:3*l[p]<2?h[p]=f+(u-f)*(2/3-l[p])*6:h[p]=f;r=(t=[J(255*h[0]),J(255*h[1]),J(255*h[2])])[0],o=t[1],i=t[2]}return e.length>3?[r,o,i,e[3]]:[r,o,i,1]},tt=Q,et=tt,nt=p,rt=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,ot=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,it=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,at=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,st=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,ct=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,lt=Math.round,ht=function(t){var e;if(t=t.toLowerCase().trim(),nt.format.named)try{return nt.format.named(t)}catch(t){}if(e=t.match(rt)){for(var n=e.slice(1,4),r=0;r<3;r++)n[r]=+n[r];return n[3]=1,n}if(e=t.match(ot)){for(var o=e.slice(1,5),i=0;i<4;i++)o[i]=+o[i];return o}if(e=t.match(it)){for(var a=e.slice(1,4),s=0;s<3;s++)a[s]=lt(2.55*a[s]);return a[3]=1,a}if(e=t.match(at)){for(var c=e.slice(1,5),l=0;l<3;l++)c[l]=lt(2.55*c[l]);return c[3]=+c[3],c}if(e=t.match(st)){var h=e.slice(1,4);h[1]*=.01,h[2]*=.01;var u=et(h);return u[3]=1,u}if(e=t.match(ct)){var f=e.slice(1,4);f[1]*=.01,f[2]*=.01;var d=et(f);return d[3]=+e[4],d}};ht.test=function(t){return rt.test(t)||ot.test(t)||it.test(t)||at.test(t)||st.test(t)||ct.test(t)};var ut=ht,ft=x,dt=_,pt=p,gt=d.type,bt=Z,vt=ut;dt.prototype.css=function(t){return bt(this._rgb,t)},ft.css=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(dt,[null].concat(t,["css"])))},pt.format.css=vt,pt.autodetect.push({p:5,test:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!e.length&&"string"===gt(t)&&vt.test(t))return"css"}});var yt=_,mt=x,_t=p,wt=d.unpack;_t.format.gl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=wt(t,"rgba");return n[0]*=255,n[1]*=255,n[2]*=255,n},mt.gl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(yt,[null].concat(t,["gl"])))},yt.prototype.gl=function(){var t=this._rgb;return[t[0]/255,t[1]/255,t[2]/255,t[3]]};var xt=d.unpack,kt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r=xt(t,"rgb"),o=r[0],i=r[1],a=r[2],s=Math.min(o,i,a),c=Math.max(o,i,a),l=c-s,h=100*l/255,u=s/(255-l)*100;return 0===l?n=Number.NaN:(o===c&&(n=(i-a)/l),i===c&&(n=2+(a-o)/l),a===c&&(n=4+(o-i)/l),(n*=60)<0&&(n+=360)),[n,h,u]},$t=kt,At=d.unpack,Ct=Math.floor,Et=function(){for(var t,e,n,r,o,i,a=[],s=arguments.length;s--;)a[s]=arguments[s];var c,l,h,u=(a=At(a,"hcg"))[0],f=a[1],d=a[2];d*=255;var p=255*f;if(0===f)c=l=h=d;else{360===u&&(u=0),u>360&&(u-=360),u<0&&(u+=360);var g=Ct(u/=60),b=u-g,v=d*(1-f),y=v+p*(1-b),m=v+p*b,_=v+p;switch(g){case 0:c=(t=[_,m,v])[0],l=t[1],h=t[2];break;case 1:c=(e=[y,_,v])[0],l=e[1],h=e[2];break;case 2:c=(n=[v,_,m])[0],l=n[1],h=n[2];break;case 3:c=(r=[v,y,_])[0],l=r[1],h=r[2];break;case 4:c=(o=[m,v,_])[0],l=o[1],h=o[2];break;case 5:c=(i=[_,v,y])[0],l=i[1],h=i[2]}}return[c,l,h,a.length>3?a[3]:1]},Mt=Et,Ot=d.unpack,St=d.type,Pt=x,Lt=_,Nt=p,Ht=$t;Lt.prototype.hcg=function(){return Ht(this._rgb)},Pt.hcg=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Lt,[null].concat(t,["hcg"])))},Nt.format.hcg=Mt,Nt.autodetect.push({p:1,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Ot(t,"hcg"),"array"===St(t)&&3===t.length)return"hcg"}});var Ut=d.unpack,jt=d.last,Rt=Math.round,Tt=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Ut(t,"rgba"),r=n[0],o=n[1],i=n[2],a=n[3],s=jt(t)||"auto";void 0===a&&(a=1),"auto"===s&&(s=a<1?"rgba":"rgb");var c="000000"+((r=Rt(r))<<16|(o=Rt(o))<<8|(i=Rt(i))).toString(16);c=c.substr(c.length-6);var l="0"+Rt(255*a).toString(16);switch(l=l.substr(l.length-2),s.toLowerCase()){case"rgba":return"#"+c+l;case"argb":return"#"+l+c;default:return"#"+c}},zt=Tt,Dt=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,It=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Bt=function(t){if(t.match(Dt)){4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var e=parseInt(t,16);return[e>>16,e>>8&255,255&e,1]}if(t.match(It)){5!==t.length&&9!==t.length||(t=t.substr(1)),4===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);var n=parseInt(t,16);return[n>>24&255,n>>16&255,n>>8&255,Math.round((255&n)/255*100)/100]}throw new Error("unknown hex color: "+t)},qt=Bt,Ft=x,Gt=_,Yt=d.type,Vt=p,Wt=zt;Gt.prototype.hex=function(t){return Wt(this._rgb,t)},Ft.hex=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Gt,[null].concat(t,["hex"])))},Vt.format.hex=qt,Vt.autodetect.push({p:4,test:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!e.length&&"string"===Yt(t)&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});var Xt=d.unpack,Zt=d.TWOPI,Kt=Math.min,Jt=Math.sqrt,Qt=Math.acos,te=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r=Xt(t,"rgb"),o=r[0],i=r[1],a=r[2],s=Kt(o/=255,i/=255,a/=255),c=(o+i+a)/3,l=c>0?1-s/c:0;return 0===l?n=NaN:(n=(o-i+(o-a))/2,n/=Jt((o-i)*(o-i)+(o-a)*(i-a)),n=Qt(n),a>i&&(n=Zt-n),n/=Zt),[360*n,l,c]},ee=te,ne=d.unpack,re=d.limit,oe=d.TWOPI,ie=d.PITHIRD,ae=Math.cos,se=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r,o,i=(t=ne(t,"hsi"))[0],a=t[1],s=t[2];return isNaN(i)&&(i=0),isNaN(a)&&(a=0),i>360&&(i-=360),i<0&&(i+=360),(i/=360)<1/3?r=1-((o=(1-a)/3)+(n=(1+a*ae(oe*i)/ae(ie-oe*i))/3)):i<2/3?o=1-((n=(1-a)/3)+(r=(1+a*ae(oe*(i-=1/3))/ae(ie-oe*i))/3)):n=1-((r=(1-a)/3)+(o=(1+a*ae(oe*(i-=2/3))/ae(ie-oe*i))/3)),[255*(n=re(s*n*3)),255*(r=re(s*r*3)),255*(o=re(s*o*3)),t.length>3?t[3]:1]},ce=se,le=d.unpack,he=d.type,ue=x,fe=_,de=p,pe=ee;fe.prototype.hsi=function(){return pe(this._rgb)},ue.hsi=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(fe,[null].concat(t,["hsi"])))},de.format.hsi=ce,de.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=le(t,"hsi"),"array"===he(t)&&3===t.length)return"hsi"}});var ge=d.unpack,be=d.type,ve=x,ye=_,me=p,_e=q;ye.prototype.hsl=function(){return _e(this._rgb)},ve.hsl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(ye,[null].concat(t,["hsl"])))},me.format.hsl=tt,me.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=ge(t,"hsl"),"array"===be(t)&&3===t.length)return"hsl"}});var we=d.unpack,xe=Math.min,ke=Math.max,$e=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r,o,i=(t=we(t,"rgb"))[0],a=t[1],s=t[2],c=xe(i,a,s),l=ke(i,a,s),h=l-c;return o=l/255,0===l?(n=Number.NaN,r=0):(r=h/l,i===l&&(n=(a-s)/h),a===l&&(n=2+(s-i)/h),s===l&&(n=4+(i-a)/h),(n*=60)<0&&(n+=360)),[n,r,o]},Ae=$e,Ce=d.unpack,Ee=Math.floor,Me=function(){for(var t,e,n,r,o,i,a=[],s=arguments.length;s--;)a[s]=arguments[s];var c,l,h,u=(a=Ce(a,"hsv"))[0],f=a[1],d=a[2];if(d*=255,0===f)c=l=h=d;else{360===u&&(u=0),u>360&&(u-=360),u<0&&(u+=360);var p=Ee(u/=60),g=u-p,b=d*(1-f),v=d*(1-f*g),y=d*(1-f*(1-g));switch(p){case 0:c=(t=[d,y,b])[0],l=t[1],h=t[2];break;case 1:c=(e=[v,d,b])[0],l=e[1],h=e[2];break;case 2:c=(n=[b,d,y])[0],l=n[1],h=n[2];break;case 3:c=(r=[b,v,d])[0],l=r[1],h=r[2];break;case 4:c=(o=[y,b,d])[0],l=o[1],h=o[2];break;case 5:c=(i=[d,b,v])[0],l=i[1],h=i[2]}}return[c,l,h,a.length>3?a[3]:1]},Oe=Me,Se=d.unpack,Pe=d.type,Le=x,Ne=_,He=p,Ue=Ae;Ne.prototype.hsv=function(){return Ue(this._rgb)},Le.hsv=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Ne,[null].concat(t,["hsv"])))},He.format.hsv=Oe,He.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Se(t,"hsv"),"array"===Pe(t)&&3===t.length)return"hsv"}});var je={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},Re=je,Te=d.unpack,ze=Math.pow,De=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Te(t,"rgb"),r=n[0],o=n[1],i=n[2],a=qe(r,o,i),s=a[0],c=a[1],l=116*c-16;return[l<0?0:l,500*(s-c),200*(c-a[2])]},Ie=function(t){return(t/=255)<=.04045?t/12.92:ze((t+.055)/1.055,2.4)},Be=function(t){return t>Re.t3?ze(t,1/3):t/Re.t2+Re.t0},qe=function(t,e,n){return t=Ie(t),e=Ie(e),n=Ie(n),[Be((.4124564*t+.3575761*e+.1804375*n)/Re.Xn),Be((.2126729*t+.7151522*e+.072175*n)/Re.Yn),Be((.0193339*t+.119192*e+.9503041*n)/Re.Zn)]},Fe=De,Ge=je,Ye=d.unpack,Ve=Math.pow,We=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n,r,o,i=(t=Ye(t,"lab"))[0],a=t[1],s=t[2];return r=(i+16)/116,n=isNaN(a)?r:r+a/500,o=isNaN(s)?r:r-s/200,r=Ge.Yn*Ze(r),n=Ge.Xn*Ze(n),o=Ge.Zn*Ze(o),[Xe(3.2404542*n-1.5371385*r-.4985314*o),Xe(-.969266*n+1.8760108*r+.041556*o),Xe(.0556434*n-.2040259*r+1.0572252*o),t.length>3?t[3]:1]},Xe=function(t){return 255*(t<=.00304?12.92*t:1.055*Ve(t,1/2.4)-.055)},Ze=function(t){return t>Ge.t1?t*t*t:Ge.t2*(t-Ge.t0)},Ke=We,Je=d.unpack,Qe=d.type,tn=x,en=_,nn=p,rn=Fe;en.prototype.lab=function(){return rn(this._rgb)},tn.lab=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(en,[null].concat(t,["lab"])))},nn.format.lab=Ke,nn.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Je(t,"lab"),"array"===Qe(t)&&3===t.length)return"lab"}});var on=d.unpack,an=d.RAD2DEG,sn=Math.sqrt,cn=Math.atan2,ln=Math.round,hn=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=on(t,"lab"),r=n[0],o=n[1],i=n[2],a=sn(o*o+i*i),s=(cn(i,o)*an+360)%360;return 0===ln(1e4*a)&&(s=Number.NaN),[r,a,s]},un=hn,fn=d.unpack,dn=Fe,pn=un,gn=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=fn(t,"rgb"),r=n[0],o=n[1],i=n[2],a=dn(r,o,i),s=a[0],c=a[1],l=a[2];return pn(s,c,l)},bn=gn,vn=d.unpack,yn=d.DEG2RAD,mn=Math.sin,_n=Math.cos,wn=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=vn(t,"lch"),r=n[0],o=n[1],i=n[2];return isNaN(i)&&(i=0),[r,_n(i*=yn)*o,mn(i)*o]},xn=wn,kn=d.unpack,$n=xn,An=Ke,Cn=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=kn(t,"lch"))[0],r=t[1],o=t[2],i=$n(n,r,o),a=i[0],s=i[1],c=i[2],l=An(a,s,c);return[l[0],l[1],l[2],t.length>3?t[3]:1]},En=Cn,Mn=d.unpack,On=En,Sn=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Mn(t,"hcl").reverse();return On.apply(void 0,n)},Pn=Sn,Ln=d.unpack,Nn=d.type,Hn=x,Un=_,jn=p,Rn=bn;Un.prototype.lch=function(){return Rn(this._rgb)},Un.prototype.hcl=function(){return Rn(this._rgb).reverse()},Hn.lch=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Un,[null].concat(t,["lch"])))},Hn.hcl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Un,[null].concat(t,["hcl"])))},jn.format.lch=En,jn.format.hcl=Pn,["lch","hcl"].forEach((function(t){return jn.autodetect.push({p:2,test:function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(e=Ln(e,t),"array"===Nn(e)&&3===e.length)return t}})}));var Tn={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},zn=_,Dn=p,In=d.type,Bn=Tn,qn=qt,Fn=zt;zn.prototype.name=function(){for(var t=Fn(this._rgb,"rgb"),e=0,n=Object.keys(Bn);e<n.length;e+=1){var r=n[e];if(Bn[r]===t)return r.toLowerCase()}return t},Dn.format.named=function(t){if(t=t.toLowerCase(),Bn[t])return qn(Bn[t]);throw new Error("unknown color name: "+t)},Dn.autodetect.push({p:5,test:function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];if(!e.length&&"string"===In(t)&&Bn[t.toLowerCase()])return"named"}});var Gn=d.unpack,Yn=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Gn(t,"rgb");return(n[0]<<16)+(n[1]<<8)+n[2]},Vn=Yn,Wn=d.type,Xn=function(t){if("number"==Wn(t)&&t>=0&&t<=16777215)return[t>>16,t>>8&255,255&t,1];throw new Error("unknown num color: "+t)},Zn=Xn,Kn=x,Jn=_,Qn=p,tr=d.type,er=Vn;Jn.prototype.num=function(){return er(this._rgb)},Kn.num=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Jn,[null].concat(t,["num"])))},Qn.format.num=Zn,Qn.autodetect.push({p:5,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(1===t.length&&"number"===tr(t[0])&&t[0]>=0&&t[0]<=16777215)return"num"}});var nr=x,rr=_,or=p,ir=d.unpack,ar=d.type,sr=Math.round;rr.prototype.rgb=function(t){return void 0===t&&(t=!0),!1===t?this._rgb.slice(0,3):this._rgb.slice(0,3).map(sr)},rr.prototype.rgba=function(t){return void 0===t&&(t=!0),this._rgb.slice(0,4).map((function(e,n){return n<3?!1===t?e:sr(e):e}))},nr.rgb=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(rr,[null].concat(t,["rgb"])))},or.format.rgb=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=ir(t,"rgba");return void 0===n[3]&&(n[3]=1),n},or.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=ir(t,"rgba"),"array"===ar(t)&&(3===t.length||4===t.length&&"number"==ar(t[3])&&t[3]>=0&&t[3]<=1))return"rgb"}});var cr=Math.log,lr=function(t){var e,n,r,o=t/100;return o<66?(e=255,n=o<6?0:-155.25485562709179-.44596950469579133*(n=o-2)+104.49216199393888*cr(n),r=o<20?0:.8274096064007395*(r=o-10)-254.76935184120902+115.67994401066147*cr(r)):(e=351.97690566805693+.114206453784165*(e=o-55)-40.25366309332127*cr(e),n=325.4494125711974+.07943456536662342*(n=o-50)-28.0852963507957*cr(n),r=255),[e,n,r,1]},hr=lr,ur=hr,fr=d.unpack,dr=Math.round,pr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n,r=fr(t,"rgb"),o=r[0],i=r[2],a=1e3,s=4e4,c=.4;s-a>c;){var l=ur(n=.5*(s+a));l[2]/l[0]>=i/o?s=n:a=n}return dr(n)},gr=x,br=_,vr=p,yr=pr;br.prototype.temp=br.prototype.kelvin=br.prototype.temperature=function(){return yr(this._rgb)},gr.temp=gr.kelvin=gr.temperature=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(br,[null].concat(t,["temp"])))},vr.format.temp=vr.format.kelvin=vr.format.temperature=hr;var mr=d.unpack,_r=Math.cbrt,wr=Math.pow,xr=Math.sign,kr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=mr(t,"rgb"),r=n[0],o=n[1],i=n[2],a=[Ar(r/255),Ar(o/255),Ar(i/255)],s=a[0],c=a[1],l=a[2],h=_r(.4122214708*s+.5363325363*c+.0514459929*l),u=_r(.2119034982*s+.6806995451*c+.1073969566*l),f=_r(.0883024619*s+.2817188376*c+.6299787005*l);return[.2104542553*h+.793617785*u-.0040720468*f,1.9779984951*h-2.428592205*u+.4505937099*f,.0259040371*h+.7827717662*u-.808675766*f]},$r=kr;function Ar(t){var e=Math.abs(t);return e<.04045?t/12.92:(xr(t)||1)*wr((e+.055)/1.055,2.4)}var Cr=d.unpack,Er=Math.pow,Mr=Math.sign,Or=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=Cr(t,"lab"))[0],r=t[1],o=t[2],i=Er(n+.3963377774*r+.2158037573*o,3),a=Er(n-.1055613458*r-.0638541728*o,3),s=Er(n-.0894841775*r-1.291485548*o,3);return[255*Pr(4.0767416621*i-3.3077115913*a+.2309699292*s),255*Pr(-1.2684380046*i+2.6097574011*a-.3413193965*s),255*Pr(-.0041960863*i-.7034186147*a+1.707614701*s),t.length>3?t[3]:1]},Sr=Or;function Pr(t){var e=Math.abs(t);return e>.0031308?(Mr(t)||1)*(1.055*Er(e,1/2.4)-.055):12.92*t}var Lr=d.unpack,Nr=d.type,Hr=x,Ur=_,jr=p,Rr=$r;Ur.prototype.oklab=function(){return Rr(this._rgb)},Hr.oklab=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Ur,[null].concat(t,["oklab"])))},jr.format.oklab=Sr,jr.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Lr(t,"oklab"),"array"===Nr(t)&&3===t.length)return"oklab"}});var Tr=d.unpack,zr=$r,Dr=un,Ir=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=Tr(t,"rgb"),r=n[0],o=n[1],i=n[2],a=zr(r,o,i),s=a[0],c=a[1],l=a[2];return Dr(s,c,l)},Br=Ir,qr=d.unpack,Fr=xn,Gr=Sr,Yr=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=(t=qr(t,"lch"))[0],r=t[1],o=t[2],i=Fr(n,r,o),a=i[0],s=i[1],c=i[2],l=Gr(a,s,c);return[l[0],l[1],l[2],t.length>3?t[3]:1]},Vr=Yr,Wr=d.unpack,Xr=d.type,Zr=x,Kr=_,Jr=p,Qr=Br;Kr.prototype.oklch=function(){return Qr(this._rgb)},Zr.oklch=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(Kr,[null].concat(t,["oklch"])))},Jr.format.oklch=Vr,Jr.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t=Wr(t,"oklch"),"array"===Xr(t)&&3===t.length)return"oklch"}});var to=_,eo=d.type;to.prototype.alpha=function(t,e){return void 0===e&&(e=!1),void 0!==t&&"number"===eo(t)?e?(this._rgb[3]=t,this):new to([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]},_.prototype.clipped=function(){return this._rgb._clipped||!1};var no=_,ro=je;no.prototype.darken=function(t){void 0===t&&(t=1);var e=this,n=e.lab();return n[0]-=ro.Kn*t,new no(n,"lab").alpha(e.alpha(),!0)},no.prototype.brighten=function(t){return void 0===t&&(t=1),this.darken(-t)},no.prototype.darker=no.prototype.darken,no.prototype.brighter=no.prototype.brighten,_.prototype.get=function(t){var e=t.split("."),n=e[0],r=e[1],o=this[n]();if(r){var i=n.indexOf(r)-("ok"===n.substr(0,2)?2:0);if(i>-1)return o[i];throw new Error("unknown channel "+r+" in mode "+n)}return o};var oo=_,io=d.type,ao=Math.pow,so=1e-7,co=20;oo.prototype.luminance=function(t){if(void 0!==t&&"number"===io(t)){if(0===t)return new oo([0,0,0,this._rgb[3]],"rgb");if(1===t)return new oo([255,255,255,this._rgb[3]],"rgb");var e=this.luminance(),n="rgb",r=co,o=function(e,i){var a=e.interpolate(i,.5,n),s=a.luminance();return Math.abs(t-s)<so||!r--?a:s>t?o(e,a):o(a,i)},i=(e>t?o(new oo([0,0,0]),this):o(this,new oo([255,255,255]))).rgb();return new oo(i.concat([this._rgb[3]]))}return lo.apply(void 0,this._rgb.slice(0,3))};var lo=function(t,e,n){return.2126*(t=ho(t))+.7152*(e=ho(e))+.0722*(n=ho(n))},ho=function(t){return(t/=255)<=.03928?t/12.92:ao((t+.055)/1.055,2.4)},uo={},fo=_,po=d.type,go=uo,bo=function(t,e,n){void 0===n&&(n=.5);for(var r=[],o=arguments.length-3;o-- >0;)r[o]=arguments[o+3];var i=r[0]||"lrgb";if(go[i]||r.length||(i=Object.keys(go)[0]),!go[i])throw new Error("interpolation mode "+i+" is not defined");return"object"!==po(t)&&(t=new fo(t)),"object"!==po(e)&&(e=new fo(e)),go[i](t,e,n).alpha(t.alpha()+n*(e.alpha()-t.alpha()))},vo=_,yo=bo;vo.prototype.mix=vo.prototype.interpolate=function(t,e){void 0===e&&(e=.5);for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return yo.apply(void 0,[this,t,e].concat(n))};var mo=_;mo.prototype.premultiply=function(t){void 0===t&&(t=!1);var e=this._rgb,n=e[3];return t?(this._rgb=[e[0]*n,e[1]*n,e[2]*n,n],this):new mo([e[0]*n,e[1]*n,e[2]*n,n],"rgb")};var _o=_,wo=je;_o.prototype.saturate=function(t){void 0===t&&(t=1);var e=this,n=e.lch();return n[1]+=wo.Kn*t,n[1]<0&&(n[1]=0),new _o(n,"lch").alpha(e.alpha(),!0)},_o.prototype.desaturate=function(t){return void 0===t&&(t=1),this.saturate(-t)};var xo=_,ko=d.type;xo.prototype.set=function(t,e,n){void 0===n&&(n=!1);var r=t.split("."),o=r[0],i=r[1],a=this[o]();if(i){var s=o.indexOf(i)-("ok"===o.substr(0,2)?2:0);if(s>-1){if("string"==ko(e))switch(e.charAt(0)){case"+":case"-":a[s]+=+e;break;case"*":a[s]*=+e.substr(1);break;case"/":a[s]/=+e.substr(1);break;default:a[s]=+e}else{if("number"!==ko(e))throw new Error("unsupported value for Color.set");a[s]=e}var c=new xo(a,o);return n?(this._rgb=c._rgb,this):c}throw new Error("unknown channel "+i+" in mode "+o)}return a};var $o=_,Ao=function(t,e,n){var r=t._rgb,o=e._rgb;return new $o(r[0]+n*(o[0]-r[0]),r[1]+n*(o[1]-r[1]),r[2]+n*(o[2]-r[2]),"rgb")};uo.rgb=Ao;var Co=_,Eo=Math.sqrt,Mo=Math.pow,Oo=function(t,e,n){var r=t._rgb,o=r[0],i=r[1],a=r[2],s=e._rgb,c=s[0],l=s[1],h=s[2];return new Co(Eo(Mo(o,2)*(1-n)+Mo(c,2)*n),Eo(Mo(i,2)*(1-n)+Mo(l,2)*n),Eo(Mo(a,2)*(1-n)+Mo(h,2)*n),"rgb")};uo.lrgb=Oo;var So=_,Po=function(t,e,n){var r=t.lab(),o=e.lab();return new So(r[0]+n*(o[0]-r[0]),r[1]+n*(o[1]-r[1]),r[2]+n*(o[2]-r[2]),"lab")};uo.lab=Po;var Lo=_,No=function(t,e,n,r){var o,i,a,s,c,l,h,u,f,d,p,g,b;return"hsl"===r?(a=t.hsl(),s=e.hsl()):"hsv"===r?(a=t.hsv(),s=e.hsv()):"hcg"===r?(a=t.hcg(),s=e.hcg()):"hsi"===r?(a=t.hsi(),s=e.hsi()):"lch"===r||"hcl"===r?(r="hcl",a=t.hcl(),s=e.hcl()):"oklch"===r&&(a=t.oklch().reverse(),s=e.oklch().reverse()),"h"!==r.substr(0,1)&&"oklch"!==r||(c=(o=a)[0],h=o[1],f=o[2],l=(i=s)[0],u=i[1],d=i[2]),isNaN(c)||isNaN(l)?isNaN(c)?isNaN(l)?g=Number.NaN:(g=l,1!=f&&0!=f||"hsv"==r||(p=u)):(g=c,1!=d&&0!=d||"hsv"==r||(p=h)):g=c+n*(l>c&&l-c>180?l-(c+360):l<c&&c-l>180?l+360-c:l-c),void 0===p&&(p=h+n*(u-h)),b=f+n*(d-f),new Lo("oklch"===r?[b,p,g]:[g,p,b],r)},Ho=No,Uo=function(t,e,n){return Ho(t,e,n,"lch")};uo.lch=Uo,uo.hcl=Uo;var jo=_,Ro=function(t,e,n){var r=t.num(),o=e.num();return new jo(r+n*(o-r),"num")};uo.num=Ro;var To=No,zo=function(t,e,n){return To(t,e,n,"hcg")};uo.hcg=zo;var Do=No,Io=function(t,e,n){return Do(t,e,n,"hsi")};uo.hsi=Io;var Bo=No,qo=function(t,e,n){return Bo(t,e,n,"hsl")};uo.hsl=qo;var Fo=No,Go=function(t,e,n){return Fo(t,e,n,"hsv")};uo.hsv=Go;var Yo=_,Vo=function(t,e,n){var r=t.oklab(),o=e.oklab();return new Yo(r[0]+n*(o[0]-r[0]),r[1]+n*(o[1]-r[1]),r[2]+n*(o[2]-r[2]),"oklab")};uo.oklab=Vo;var Wo=No,Xo=function(t,e,n){return Wo(t,e,n,"oklch")};uo.oklch=Xo;var Zo=_,Ko=d.clip_rgb,Jo=Math.pow,Qo=Math.sqrt,ti=Math.PI,ei=Math.cos,ni=Math.sin,ri=Math.atan2,oi=function(t,e,n){void 0===e&&(e="lrgb"),void 0===n&&(n=null);var r=t.length;n||(n=Array.from(new Array(r)).map((function(){return 1})));var o=r/n.reduce((function(t,e){return t+e}));if(n.forEach((function(t,e){n[e]*=o})),t=t.map((function(t){return new Zo(t)})),"lrgb"===e)return ii(t,n);for(var i=t.shift(),a=i.get(e),s=[],c=0,l=0,h=0;h<a.length;h++)if(a[h]=(a[h]||0)*n[0],s.push(isNaN(a[h])?0:n[0]),"h"===e.charAt(h)&&!isNaN(a[h])){var u=a[h]/180*ti;c+=ei(u)*n[0],l+=ni(u)*n[0]}var f=i.alpha()*n[0];t.forEach((function(t,r){var o=t.get(e);f+=t.alpha()*n[r+1];for(var i=0;i<a.length;i++)if(!isNaN(o[i]))if(s[i]+=n[r+1],"h"===e.charAt(i)){var h=o[i]/180*ti;c+=ei(h)*n[r+1],l+=ni(h)*n[r+1]}else a[i]+=o[i]*n[r+1]}));for(var d=0;d<a.length;d++)if("h"===e.charAt(d)){for(var p=ri(l/s[d],c/s[d])/ti*180;p<0;)p+=360;for(;p>=360;)p-=360;a[d]=p}else a[d]=a[d]/s[d];return f/=r,new Zo(a,e).alpha(f>.99999?1:f,!0)},ii=function(t,e){for(var n=t.length,r=[0,0,0,0],o=0;o<t.length;o++){var i=t[o],a=e[o]/n,s=i._rgb;r[0]+=Jo(s[0],2)*a,r[1]+=Jo(s[1],2)*a,r[2]+=Jo(s[2],2)*a,r[3]+=s[3]*a}return r[0]=Qo(r[0]),r[1]=Qo(r[1]),r[2]=Qo(r[2]),r[3]>.9999999&&(r[3]=1),new Zo(Ko(r))},ai=x,si=d.type,ci=Math.pow,li=function(t){var e="rgb",n=ai("#ccc"),r=0,o=[0,1],i=[],a=[0,0],s=!1,c=[],l=!1,h=0,u=1,f=!1,d={},p=!0,g=1,b=function(t){if((t=t||["#fff","#000"])&&"string"===si(t)&&ai.brewer&&ai.brewer[t.toLowerCase()]&&(t=ai.brewer[t.toLowerCase()]),"array"===si(t)){1===t.length&&(t=[t[0],t[0]]),t=t.slice(0);for(var e=0;e<t.length;e++)t[e]=ai(t[e]);i.length=0;for(var n=0;n<t.length;n++)i.push(n/(t.length-1))}return w(),c=t},v=function(t){if(null!=s){for(var e=s.length-1,n=0;n<e&&t>=s[n];)n++;return n-1}return 0},y=function(t){return t},m=function(t){return t},_=function(t,r){var o,l;if(null==r&&(r=!1),isNaN(t)||null===t)return n;l=r?t:s&&s.length>2?v(t)/(s.length-2):u!==h?(t-h)/(u-h):1,l=m(l),r||(l=y(l)),1!==g&&(l=ci(l,g)),l=a[0]+l*(1-a[0]-a[1]),l=Math.min(1,Math.max(0,l));var f=Math.floor(1e4*l);if(p&&d[f])o=d[f];else{if("array"===si(c))for(var b=0;b<i.length;b++){var _=i[b];if(l<=_){o=c[b];break}if(l>=_&&b===i.length-1){o=c[b];break}if(l>_&&l<i[b+1]){l=(l-_)/(i[b+1]-_),o=ai.interpolate(c[b],c[b+1],l,e);break}}else"function"===si(c)&&(o=c(l));p&&(d[f]=o)}return o},w=function(){return d={}};b(t);var x=function(t){var e=ai(_(t));return l&&e[l]?e[l]():e};return x.classes=function(t){if(null!=t){if("array"===si(t))s=t,o=[t[0],t[t.length-1]];else{var e=ai.analyze(o);s=0===t?[e.min,e.max]:ai.limits(e,"e",t)}return x}return s},x.domain=function(t){if(!arguments.length)return o;h=t[0],u=t[t.length-1],i=[];var e=c.length;if(t.length===e&&h!==u)for(var n=0,r=Array.from(t);n<r.length;n+=1){var a=r[n];i.push((a-h)/(u-h))}else{for(var s=0;s<e;s++)i.push(s/(e-1));if(t.length>2){var l=t.map((function(e,n){return n/(t.length-1)})),f=t.map((function(t){return(t-h)/(u-h)}));f.every((function(t,e){return l[e]===t}))||(m=function(t){if(t<=0||t>=1)return t;for(var e=0;t>=f[e+1];)e++;var n=(t-f[e])/(f[e+1]-f[e]);return l[e]+n*(l[e+1]-l[e])})}}return o=[h,u],x},x.mode=function(t){return arguments.length?(e=t,w(),x):e},x.range=function(t,e){return b(t),x},x.out=function(t){return l=t,x},x.spread=function(t){return arguments.length?(r=t,x):r},x.correctLightness=function(t){return null==t&&(t=!0),f=t,w(),y=f?function(t){for(var e=_(0,!0).lab()[0],n=_(1,!0).lab()[0],r=e>n,o=_(t,!0).lab()[0],i=e+(n-e)*t,a=o-i,s=0,c=1,l=20;Math.abs(a)>.01&&l-- >0;)r&&(a*=-1),a<0?(s=t,t+=.5*(c-t)):(c=t,t+=.5*(s-t)),o=_(t,!0).lab()[0],a=o-i;return t}:function(t){return t},x},x.padding=function(t){return null!=t?("number"===si(t)&&(t=[t,t]),a=t,x):a},x.colors=function(e,n){arguments.length<2&&(n="hex");var r=[];if(0===arguments.length)r=c.slice(0);else if(1===e)r=[x(.5)];else if(e>1){var i=o[0],a=o[1]-i;r=hi(0,e).map((function(t){return x(i+t/(e-1)*a)}))}else{t=[];var l=[];if(s&&s.length>2)for(var h=1,u=s.length,f=1<=u;f?h<u:h>u;f?h++:h--)l.push(.5*(s[h-1]+s[h]));else l=o;r=l.map((function(t){return x(t)}))}return ai[n]&&(r=r.map((function(t){return t[n]()}))),r},x.cache=function(t){return null!=t?(p=t,x):p},x.gamma=function(t){return null!=t?(g=t,x):g},x.nodata=function(t){return null!=t?(n=ai(t),x):n},x};function hi(t,e,n){for(var r=[],o=t<e,i=e,a=t;o?a<i:a>i;o?a++:a--)r.push(a);return r}var ui=_,fi=li,di=function(t){for(var e=[1,1],n=1;n<t;n++){for(var r=[1],o=1;o<=e.length;o++)r[o]=(e[o]||0)+e[o-1];e=r}return e},pi=function(t){var e,n,r,o,i,a,s;if(t=t.map((function(t){return new ui(t)})),2===t.length)e=t.map((function(t){return t.lab()})),i=e[0],a=e[1],o=function(t){var e=[0,1,2].map((function(e){return i[e]+t*(a[e]-i[e])}));return new ui(e,"lab")};else if(3===t.length)n=t.map((function(t){return t.lab()})),i=n[0],a=n[1],s=n[2],o=function(t){var e=[0,1,2].map((function(e){return(1-t)*(1-t)*i[e]+2*(1-t)*t*a[e]+t*t*s[e]}));return new ui(e,"lab")};else if(4===t.length){var c;r=t.map((function(t){return t.lab()})),i=r[0],a=r[1],s=r[2],c=r[3],o=function(t){var e=[0,1,2].map((function(e){return(1-t)*(1-t)*(1-t)*i[e]+3*(1-t)*(1-t)*t*a[e]+3*(1-t)*t*t*s[e]+t*t*t*c[e]}));return new ui(e,"lab")}}else{if(!(t.length>=5))throw new RangeError("No point in running bezier with only one color.");var l,h,u;l=t.map((function(t){return t.lab()})),u=t.length-1,h=di(u),o=function(t){var e=1-t,n=[0,1,2].map((function(n){return l.reduce((function(r,o,i){return r+h[i]*Math.pow(e,u-i)*Math.pow(t,i)*o[n]}),0)}));return new ui(n,"lab")}}return o},gi=function(t){var e=pi(t);return e.scale=function(){return fi(e)},e},bi=x,vi=function(t,e,n){if(!vi[n])throw new Error("unknown blend mode "+n);return vi[n](t,e)},yi=function(t){return function(e,n){var r=bi(n).rgb(),o=bi(e).rgb();return bi.rgb(t(r,o))}},mi=function(t){return function(e,n){var r=[];return r[0]=t(e[0],n[0]),r[1]=t(e[1],n[1]),r[2]=t(e[2],n[2]),r}},_i=function(t){return t},wi=function(t,e){return t*e/255},xi=function(t,e){return t>e?e:t},ki=function(t,e){return t>e?t:e},$i=function(t,e){return 255*(1-(1-t/255)*(1-e/255))},Ai=function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))},Ci=function(t,e){return 255*(1-(1-e/255)/(t/255))},Ei=function(t,e){return 255===t||(t=e/255*255/(1-t/255))>255?255:t};vi.normal=yi(mi(_i)),vi.multiply=yi(mi(wi)),vi.screen=yi(mi($i)),vi.overlay=yi(mi(Ai)),vi.darken=yi(mi(xi)),vi.lighten=yi(mi(ki)),vi.dodge=yi(mi(Ei)),vi.burn=yi(mi(Ci));for(var Mi=vi,Oi=d.type,Si=d.clip_rgb,Pi=d.TWOPI,Li=Math.pow,Ni=Math.sin,Hi=Math.cos,Ui=x,ji=function(t,e,n,r,o){void 0===t&&(t=300),void 0===e&&(e=-1.5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===o&&(o=[0,1]);var i,a=0;"array"===Oi(o)?i=o[1]-o[0]:(i=0,o=[o,o]);var s=function(s){var c=Pi*((t+120)/360+e*s),l=Li(o[0]+i*s,r),h=(0!==a?n[0]+s*a:n)*l*(1-l)/2,u=Hi(c),f=Ni(c);return Ui(Si([255*(l+h*(-.14861*u+1.78277*f)),255*(l+h*(-.29227*u-.90649*f)),255*(l+h*(1.97294*u)),1]))};return s.start=function(e){return null==e?t:(t=e,s)},s.rotations=function(t){return null==t?e:(e=t,s)},s.gamma=function(t){return null==t?r:(r=t,s)},s.hue=function(t){return null==t?n:("array"===Oi(n=t)?0==(a=n[1]-n[0])&&(n=n[1]):a=0,s)},s.lightness=function(t){return null==t?o:("array"===Oi(t)?(o=t,i=t[1]-t[0]):(o=[t,t],i=0),s)},s.scale=function(){return Ui.scale(s)},s.hue(n),s},Ri=_,Ti="0123456789abcdef",zi=Math.floor,Di=Math.random,Ii=function(){for(var t="#",e=0;e<6;e++)t+=Ti.charAt(zi(16*Di()));return new Ri(t,"hex")},Bi=s,qi=Math.log,Fi=Math.pow,Gi=Math.floor,Yi=Math.abs,Vi=function(t,e){void 0===e&&(e=null);var n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===Bi(t)&&(t=Object.values(t)),t.forEach((function(t){e&&"object"===Bi(t)&&(t=t[e]),null==t||isNaN(t)||(n.values.push(t),n.sum+=t,t<n.min&&(n.min=t),t>n.max&&(n.max=t),n.count+=1)})),n.domain=[n.min,n.max],n.limits=function(t,e){return Wi(n,t,e)},n},Wi=function(t,e,n){void 0===e&&(e="equal"),void 0===n&&(n=7),"array"==Bi(t)&&(t=Vi(t));var r=t.min,o=t.max,i=t.values.sort((function(t,e){return t-e}));if(1===n)return[r,o];var a=[];if("c"===e.substr(0,1)&&(a.push(r),a.push(o)),"e"===e.substr(0,1)){a.push(r);for(var s=1;s<n;s++)a.push(r+s/n*(o-r));a.push(o)}else if("l"===e.substr(0,1)){if(r<=0)throw new Error("Logarithmic scales are only possible for values > 0");var c=Math.LOG10E*qi(r),l=Math.LOG10E*qi(o);a.push(r);for(var h=1;h<n;h++)a.push(Fi(10,c+h/n*(l-c)));a.push(o)}else if("q"===e.substr(0,1)){a.push(r);for(var u=1;u<n;u++){var f=(i.length-1)*u/n,d=Gi(f);if(d===f)a.push(i[d]);else{var p=f-d;a.push(i[d]*(1-p)+i[d+1]*p)}}a.push(o)}else if("k"===e.substr(0,1)){var g,b=i.length,v=new Array(b),y=new Array(n),m=!0,_=0,w=null;(w=[]).push(r);for(var x=1;x<n;x++)w.push(r+x/n*(o-r));for(w.push(o);m;){for(var k=0;k<n;k++)y[k]=0;for(var $=0;$<b;$++)for(var A=i[$],C=Number.MAX_VALUE,E=void 0,M=0;M<n;M++){var O=Yi(w[M]-A);O<C&&(C=O,E=M),y[E]++,v[$]=E}for(var S=new Array(n),P=0;P<n;P++)S[P]=null;for(var L=0;L<b;L++)null===S[g=v[L]]?S[g]=i[L]:S[g]+=i[L];for(var N=0;N<n;N++)S[N]*=1/y[N];m=!1;for(var H=0;H<n;H++)if(S[H]!==w[H]){m=!0;break}w=S,++_>200&&(m=!1)}for(var U={},j=0;j<n;j++)U[j]=[];for(var R=0;R<b;R++)U[g=v[R]].push(i[R]);for(var T=[],z=0;z<n;z++)T.push(U[z][0]),T.push(U[z][U[z].length-1]);T=T.sort((function(t,e){return t-e})),a.push(T[0]);for(var D=1;D<T.length;D+=2){var I=T[D];isNaN(I)||-1!==a.indexOf(I)||a.push(I)}}return a},Xi={analyze:Vi,limits:Wi},Zi=_,Ki=function(t,e){t=new Zi(t),e=new Zi(e);var n=t.luminance(),r=e.luminance();return n>r?(n+.05)/(r+.05):(r+.05)/(n+.05)},Ji=_,Qi=Math.sqrt,ta=Math.pow,ea=Math.min,na=Math.max,ra=Math.atan2,oa=Math.abs,ia=Math.cos,aa=Math.sin,sa=Math.exp,ca=Math.PI,la=function(t,e,n,r,o){void 0===n&&(n=1),void 0===r&&(r=1),void 0===o&&(o=1);var i=function(t){return 360*t/(2*ca)},a=function(t){return 2*ca*t/360};t=new Ji(t),e=new Ji(e);var s=Array.from(t.lab()),c=s[0],l=s[1],h=s[2],u=Array.from(e.lab()),f=u[0],d=u[1],p=u[2],g=(c+f)/2,b=(Qi(ta(l,2)+ta(h,2))+Qi(ta(d,2)+ta(p,2)))/2,v=.5*(1-Qi(ta(b,7)/(ta(b,7)+ta(25,7)))),y=l*(1+v),m=d*(1+v),_=Qi(ta(y,2)+ta(h,2)),w=Qi(ta(m,2)+ta(p,2)),x=(_+w)/2,k=i(ra(h,y)),$=i(ra(p,m)),A=k>=0?k:k+360,C=$>=0?$:$+360,E=oa(A-C)>180?(A+C+360)/2:(A+C)/2,M=1-.17*ia(a(E-30))+.24*ia(a(2*E))+.32*ia(a(3*E+6))-.2*ia(a(4*E-63)),O=C-A;O=oa(O)<=180?O:C<=A?O+360:O-360,O=2*Qi(_*w)*aa(a(O)/2);var S=f-c,P=w-_,L=1+.015*ta(g-50,2)/Qi(20+ta(g-50,2)),N=1+.045*x,H=1+.015*x*M,U=30*sa(-ta((E-275)/25,2)),j=-2*Qi(ta(x,7)/(ta(x,7)+ta(25,7)))*aa(2*a(U)),R=Qi(ta(S/(n*L),2)+ta(P/(r*N),2)+ta(O/(o*H),2)+j*(P/(r*N))*(O/(o*H)));return na(0,ea(100,R))},ha=_,ua=function(t,e,n){void 0===n&&(n="lab"),t=new ha(t),e=new ha(e);var r=t.get(n),o=e.get(n),i=0;for(var a in r){var s=(r[a]||0)-(o[a]||0);i+=s*s}return Math.sqrt(i)},fa=_,da=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];try{return new(Function.prototype.bind.apply(fa,[null].concat(t))),!0}catch(t){return!1}},pa=x,ga=li,ba={cool:function(){return ga([pa.hsl(180,1,.9),pa.hsl(250,.7,.4)])},hot:function(){return ga(["#000","#f00","#ff0","#fff"]).mode("rgb")}},va={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},ya=0,ma=Object.keys(va);ya<ma.length;ya+=1){var _a=ma[ya];va[_a.toLowerCase()]=va[_a]}var wa=va,xa=x;xa.average=oi,xa.bezier=gi,xa.blend=Mi,xa.cubehelix=ji,xa.mix=xa.interpolate=bo,xa.random=Ii,xa.scale=li,xa.analyze=Xi.analyze,xa.contrast=Ki,xa.deltaE=la,xa.distance=ua,xa.limits=Xi.limits,xa.valid=da,xa.scales=ba,xa.colors=Tn,xa.brewer=wa;var ka=xa;return ka}();var $t=xt(kt.exports);function At(t){const e=$t(t),n=$t.lab(e.lab()[0],e.get("lab.a"),e.get("lab.b"));let r=e.lab()[0]>50?$t.lab(0,n.lab()[1],n.lab()[2]):$t.lab(100,n.lab()[1],n.lab()[2]);return r=function(t,e){let n=e,r=$t.contrast(t,n),o=0;for(;r<4.5&&o<200;)n=t.lab()[0]>50?n.set("lab.l",Math.max(0,n.lab()[0]-1)):n.set("lab.l",Math.min(100,n.lab()[0]+1)),r=$t.contrast(t,n),o++;return r<4.5&&(n=n.set("lab.l",100-n.lab()[0]),r=$t.contrast(t,n)),n}(e,r),r.rgb()}class Ct extends ct{constructor(){super(),this._isOn=!1,this._currentEffect="No effect",this._isDropdownOpen=!1,this._isAttributesExpanded=!1,this._backgroundColor="",this._textColor="",this._accentColor="",this._showEffectInfo=!0,this._showEffectParameters=!0,this._brightness=100,this._colorThief=new mt,this._transitionInProgress=!1,this._debouncedUpdate=this._debounce((()=>{this._updateStateFromHass(),this._debouncedExtractColors()}),100),this._debouncedExtractColors=this._debounce((()=>{this._extractColors()}),100),this._clickOutsideHandler=this._handleClickOutside.bind(this),console.debug("HyperLightCard: Constructor called")}static get styles(){return l`
      ${c("/* Root variables */\n:root {\n  --primary-color: #03a9f4;\n  --secondary-color: #f0f0f0;\n  --background-color: white;\n  --text-color: black;\n  --box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12),\n    0 3px 1px -2px rgba(0, 0, 0, 0.2);\n}\n\n/* Global styles */\n* {\n  transition: all 0.5s ease;\n}\n\n/* Card Container */\nha-card {\n  overflow: visible !important;\n}\n\n/* Main card styling */\n.card {\n  background-color: var(\n    --background-color,\n    var(--ha-card-background, var(--card-background-color, white))\n  );\n  border-radius: 8px;\n  box-shadow: var(\n    --ha-card-box-shadow,\n    0 2px 2px 0 rgba(0, 0, 0, 0.14),\n    0 1px 5px 0 rgba(0, 0, 0, 0.12),\n    0 3px 1px -2px rgba(0, 0, 0, 0.2)\n  );\n  color: var(--text-color, var(--primary-text-color, black));\n  padding: 16px;\n  position: relative;\n  overflow: visible;\n  z-index: 1;\n  font-size: 14px;\n  transition:\n    background-color 0.5s ease,\n    color 0.5s ease;\n}\n\n/* Card border */\n.card::after {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  border-radius: 8px;\n  pointer-events: none;\n  box-shadow: inset 0 0 0 1px rgba(var(--rgb-primary-text-color, 0, 0, 0), 0.1);\n  z-index: 1;\n}\n\n/* Card Background */\n.card-background {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-size: cover;\n  background-position: center;\n  opacity: 0.7;\n  transition:\n    opacity 0.5s ease,\n    background-image 0.5s ease;\n  z-index: 0;\n  pointer-events: none;\n  border-radius: 8px; /* Add border-radius to match the card */\n}\n\n/* Header section */\n.header {\n  display: flex;\n  align-items: center;\n  margin-bottom: 16px;\n  position: relative;\n  z-index: 2;\n}\n\n/* Light icon styling */\n.light-icon {\n  width: 40px;\n  height: 40px;\n  margin-right: 16px;\n  border-radius: 50%;\n  background-color: var(--accent-color, var(--primary-color, #03a9f4));\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  overflow: hidden;\n  box-shadow: 0 0 0\n    rgba(var(--accent-color, var(--primary-color-rgb, 3, 169, 244)), 0);\n  transition: box-shadow 0.3s ease;\n}\n\n.light-icon img {\n  width: 30px;\n  height: 30px;\n  filter: brightness(0.8);\n  transition: filter 0.3s ease;\n}\n\n/* Light icon when the light is on */\n.light-on .light-icon {\n  box-shadow: 0 0 15px var(--accent-color, var(--primary-color, #03a9f4));\n  animation: pulse 1.5s infinite;\n}\n\n.light-on .light-icon img {\n  filter: brightness(1.2) drop-shadow(0 0 5px rgba(255, 255, 255, 0.7));\n}\n\n/* Pulsing animation for light icon */\n@keyframes pulse {\n  0% {\n    box-shadow: 0 0 0 0 rgba(var(--rgb-accent-color), 0.7);\n  }\n  70% {\n    box-shadow: 0 0 0 10px rgba(var(--rgb-accent-color), 0);\n  }\n  100% {\n    box-shadow: 0 0 0 0 rgba(var(--rgb-accent-color), 0);\n  }\n}\n\n/* Light name styling */\n.light-name {\n  flex-grow: 1;\n  font-weight: bold;\n  font-size: 1.5em;\n  color: var(--text-color, var(--primary-text-color, black));\n  margin: 0 6px;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n/* Dropdown section */\n.effect-select-wrapper {\n  position: relative;\n  margin-bottom: 16px;\n  z-index: 5;\n}\n\n.dropdown {\n  position: relative;\n}\n\n.dropdown-header {\n  padding: 8px 12px;\n  border: 2px solid var(--accent-color, var(--primary-color, #03a9f4));\n  border-radius: 4px;\n  cursor: pointer;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: var(\n    --background-color,\n    var(--card-background-color, white)\n  );\n  color: var(--text-color, var(--primary-text-color, black));\n  font-size: 1.1em;\n  transition:\n    background-color 0.3s ease,\n    color 0.3s ease;\n}\n\n.dropdown-header:hover {\n  background-color: var(\n    --accent-color,\n    var(--secondary-background-color, #f0f0f0)\n  );\n  color: var(--background-color, var(--primary-text-color, black));\n}\n\n.dropdown-header::after {\n  content: '';\n  font-size: 0.8em;\n  transition: transform 0.3s ease;\n}\n\n.dropdown.open .dropdown-header::after {\n  transform: rotate(180deg);\n}\n\n.dropdown-content {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  background-color: var(\n    --background-color,\n    var(--card-background-color, white)\n  );\n  border: 1px solid var(--accent-color, var(--primary-color, #03a9f4));\n  border-radius: 0 0 4px 4px;\n  max-height: 200px;\n  overflow-y: auto;\n  z-index: 6; /* Increased z-index */\n  opacity: 0;\n  visibility: hidden;\n  transform-origin: top;\n  transform: scaleY(0);\n  transition:\n    opacity 0.3s,\n    visibility 0.3s,\n    transform 0.3s;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.dropdown.open .dropdown-content {\n  opacity: 1;\n  visibility: visible;\n  transform: scaleY(1);\n}\n\n.dropdown-item {\n  padding: 8px 12px;\n  cursor: pointer;\n  color: var(--text-color, var(--primary-text-color, black));\n  font-size: 1.1em;\n  transition:\n    background-color 0.3s ease,\n    color 0.3s ease;\n}\n\n.dropdown-item:hover {\n  background-color: var(--accent-color, var(--primary-color, #03a9f4));\n  color: var(--background-color, white);\n}\n\n/* Effect info section */\n.effect-info {\n  background-color: rgba(var(--background-color-rgb, 128, 128, 128), 0.1);\n  -webkit-backdrop-filter: blur(10px);\n          backdrop-filter: blur(10px);\n  border-radius: 8px;\n  padding: 12px;\n  margin-top: 12px;\n  position: relative;\n  z-index: 4; /* Adjusted z-index */\n  opacity: 0;\n  transform: translateY(-10px);\n  max-height: 0;\n  overflow: hidden;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  border: 1px solid rgba(var(--accent-color-rgb, 3, 169, 244), 0.3);\n  display: flex;\n  justify-content: space-between;\n  transition:\n    opacity 0.3s ease,\n    transform 0.3s ease,\n    max-height 0.3s ease;\n}\n\n.effect-info.visible {\n  opacity: 1;\n  transform: translateY(0);\n  max-height: 200px;\n}\n\n.effect-info-text {\n  flex: 1;\n}\n\n.effect-description {\n  font-style: italic;\n  color: var(--text-color, var(--primary-text-color, black));\n  font-weight: 500;\n  margin-bottom: 8px;\n  line-height: 1.4;\n}\n\n.effect-publisher {\n  font-size: 0.9em;\n  color: var(--text-color, var(--secondary-text-color, #666));\n  font-weight: 500;\n  line-height: 1.4;\n}\n\n.effect-features {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin-left: 12px;\n}\n\n.effect-features ha-icon {\n  --mdc-icon-size: 20px;\n  color: var(--text-color, var(--secondary-text-color, #666));\n  margin-bottom: 4px;\n}\n\n.effect-features ha-icon:last-child {\n  margin-bottom: 0;\n}\n\n/* Controls row (brightness slider and attributes toggle) */\n.controls-row {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-top: 16px;\n  padding: 0 8px;\n}\n\n/* Brightness Slider */\n.brightness-slider {\n  display: flex;\n  align-items: center;\n  flex-grow: 1;\n  margin-right: 16px;\n}\n\n.brightness-slider ha-icon {\n  margin-right: 8px;\n  color: var(--text-color);\n}\n\n.brightness-slider input[type='range'] {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n       appearance: none; /* Add the standard 'appearance' property */\n  width: 100%;\n  height: 8px;\n  border-radius: 4px;\n  background: var(--primary-text-color);\n  outline: none;\n  opacity: 0.8;\n  transition: all 0.3s ease;\n  margin: 0;\n  padding: 0;\n}\n\n.brightness-slider input[type='range']::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  appearance: none;\n  width: 18px;\n  height: 18px;\n  border-radius: 50%;\n  background: var(--slider-color, var(--accent-color));\n  cursor: pointer;\n  -webkit-transition: all 0.3s ease;\n  transition: all 0.3s ease;\n  box-shadow: 0 0 0 3px rgba(var(--rgb-primary-text-color), 0.8);\n  margin-top: -5px;\n}\n\n.brightness-slider input[type='range']::-moz-range-thumb {\n  width: 18px;\n  height: 18px;\n  border: none;\n  border-radius: 50%;\n  background: var(--slider-color, var(--accent-color));\n  cursor: pointer;\n  -moz-transition: all 0.3s ease;\n  transition: all 0.3s ease;\n  box-shadow: 0 0 0 3px rgba(var(--rgb-primary-text-color), 0.8);\n}\n\n.brightness-slider input[type='range']::-webkit-slider-runnable-track {\n  height: 8px;\n  border-radius: 4px;\n  background: linear-gradient(\n    to right,\n    var(--slider-color, var(--accent-color)) 0%,\n    var(--slider-color, var(--accent-color)) var(--slider-percentage, 50%),\n    var(--primary-text-color) var(--slider-percentage, 50%),\n    var(--primary-text-color) 100%\n  );\n}\n\n.brightness-slider input[type='range']::-moz-range-track {\n  height: 8px;\n  border-radius: 4px;\n  background: linear-gradient(\n    to right,\n    var(--slider-color, var(--accent-color)) 0%,\n    var(--slider-color, var(--accent-color)) var(--slider-percentage, 50%),\n    var(--primary-text-color) var(--slider-percentage, 50%),\n    var(--primary-text-color) 100%\n  );\n}\n\n.brightness-slider input[type='range']:hover::-webkit-slider-thumb,\n.brightness-slider input[type='range']:active::-webkit-slider-thumb {\n  box-shadow: 0 0 0 4px rgba(var(--rgb-primary-text-color), 0.9);\n  transform: scale(1.2);\n}\n\n.brightness-slider input[type='range']:hover::-moz-range-thumb,\n.brightness-slider input[type='range']:active::-moz-range-thumb {\n  box-shadow: 0 0 0 4px rgba(var(--rgb-primary-text-color), 0.9);\n  transform: scale(1.2);\n}\n\n/* Attributes section */\n.attributes {\n  margin-top: 8px;\n  position: relative;\n  z-index: 2;\n}\n\n.attributes-toggle {\n  cursor: pointer;\n  padding: 8px;\n  border-radius: 50%;\n  background-color: rgba(var(--rgb-primary-text-color), 0.1);\n  transition: background-color 0.3s ease;\n}\n\n.attributes-toggle:hover {\n  background-color: rgba(var(--rgb-primary-text-color), 0.2);\n}\n\n.attributes-toggle ha-icon {\n  display: block;\n  transition: transform 0.3s ease;\n}\n\n.attributes.expanded .attributes-toggle ha-icon {\n  transform: rotate(180deg);\n}\n\n.attributes-content {\n  max-height: 0;\n  overflow: hidden;\n  border-radius: 8px;\n  padding: 0;\n  margin-top: 8px;\n  background-color: rgba(var(--background-color-rgb, 128, 128, 128), 0.1);\n  -webkit-backdrop-filter: blur(10px);\n          backdrop-filter: blur(10px);\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  transition:\n    max-height 0.3s ease,\n    padding 0.3s ease,\n    opacity 0.3s ease;\n  opacity: 0;\n}\n\n.attributes.expanded .attributes-content {\n  max-height: 300px;\n  padding: 8px 12px;\n  overflow-y: auto;\n  border: 1px solid rgba(var(--accent-color-rgb, 3, 169, 244), 0.3);\n  opacity: 1;\n}\n\n/* Attribute list styling */\n.attribute-list {\n  list-style-type: none;\n  padding: 0;\n  margin: 0;\n}\n\n.attribute-item {\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  padding: 6px 0;\n  border-bottom: 1px solid rgba(var(--rgb-primary-text-color, 0, 0, 0), 0.12);\n  font-size: 0.9em;\n}\n\n.attribute-item:last-child {\n  border-bottom: none;\n}\n\n.attribute-key {\n  font-weight: bold;\n  margin-right: 8px;\n  color: var(--text-color, var(--primary-text-color, black));\n  flex: 0 0 40%;\n}\n\n.attribute-value {\n  flex: 0 0 58%;\n  text-align: right;\n  color: var(--text-color, var(--secondary-text-color, #666));\n  overflow-wrap: break-word;\n  word-break: break-word;\n  font-size: 0.9em;\n}\n\n/* Scrollbar styles */\n.dropdown-content::-webkit-scrollbar,\n.attributes.expanded .attributes-content::-webkit-scrollbar {\n  width: 8px;\n}\n\n.dropdown-content::-webkit-scrollbar-track,\n.attributes.expanded .attributes-content::-webkit-scrollbar-track {\n  background: rgba(var(--background-color-rgb, 128, 128, 128), 0.1);\n}\n\n.dropdown-content::-webkit-scrollbar-thumb,\n.attributes.expanded .attributes-content::-webkit-scrollbar-thumb {\n  background-color: var(--accent-color, var(--primary-color, #03a9f4));\n  border-radius: 4px;\n  border: 2px solid rgba(var(--background-color-rgb, 128, 128, 128), 0.1);\n}\n\n/* Toggle switch styles */\nha-switch {\n  --switch-checked-color: var(--accent-color, var(--primary-color));\n  --switch-checked-button-color: var(\n    --switch-checked-color,\n    var(--primary-background-color)\n  );\n  --switch-checked-track-color: var(--switch-checked-color, #000000);\n}\n\n/* Utility classes */\n.bg-white {\n  background-color: var(--background-color);\n}\n\n.text-black {\n  color: var(--text-color);\n}\n\n.rounded {\n  border-radius: 8px;\n}\n\n/* Responsive design */\n@media (max-width: 600px) {\n  .card {\n    padding: 12px;\n    font-size: 14px;\n  }\n\n  .light-icon {\n    width: 32px;\n    height: 32px;\n  }\n\n  .light-icon img {\n    width: 24px;\n    height: 24px;\n  }\n\n  .light-name {\n    font-size: 1.5em;\n  }\n\n  .dropdown-header,\n  .dropdown-item {\n    padding: 6px 10px;\n  }\n\n  .controls-row {\n    flex-direction: column;\n    align-items: stretch;\n  }\n\n  .brightness-slider {\n    margin-right: 0;\n    margin-bottom: 12px;\n  }\n\n  .attributes-toggle {\n    align-self: flex-end;\n  }\n}\n\n/* Ensure content is above background */\n.header,\n.controls-row,\n.attributes {\n  position: relative;\n  z-index: 3;\n}\n")}
    `}setConfig(t){var e,n;if(console.debug("HyperLightCard: setConfig called",t),!t.entity)throw new Error("You need to define an entity");this.config=Object.assign({name:t.name,icon:t.icon||"https://brands.home-assistant.io/_/signalrgb/icon.png",background_opacity:t.background_opacity||.7,show_effect_info:!1!==t.show_effect_info,show_effect_parameters:!1!==t.show_effect_parameters},t),this._showEffectInfo=null===(e=this.config.show_effect_info)||void 0===e||e,this._showEffectParameters=null===(n=this.config.show_effect_parameters)||void 0===n||n,console.debug("HyperLightCard: Config set",this.config)}getCardSize(){return 3}firstUpdated(){console.debug("HyperLightCard: firstUpdated called"),this._setupMutationObserver(),this._debouncedExtractColors()}_extractColors(){var t,e;if(console.debug("HyperLightCard: _extractColors called"),!(null===(t=this.config)||void 0===t?void 0:t.entity))return void console.debug("HyperLightCard: No entity configured");const n=null===(e=this.hass)||void 0===e?void 0:e.states[this.config.entity];if(n&&n.attributes.effect_image){console.debug("HyperLightCard: Extracting colors from effect image");const t=new Image;t.crossOrigin="Anonymous",t.src=n.attributes.effect_image,t.alt=`${n.entity_id} effect image`,t.onload=()=>{const e=this._colorThief.getPalette(t,3);console.debug("HyperLightCard: Color palette extracted",e),e&&e.length>=2?this._applyColorTransition(e):console.warn("HyperLightCard: Insufficient colors in palette",e)}}else console.debug("HyperLightCard: No effect image found")}_applyColorTransition(t){return n(this,void 0,void 0,(function*(){if(console.debug("HyperLightCard: _applyColorTransition called",t),this._transitionInProgress)return void console.debug("HyperLightCard: Color transition already in progress");this._transitionInProgress=!0;const e=`rgb(${t[0].join(",")})`,n=`rgb(${At(t[0]).join(",")})`,r=`rgb(${t[1].join(",")})`;console.debug("HyperLightCard: New colors:",e,n,r),yield new Promise((t=>{requestAnimationFrame((()=>{this.style.setProperty("--background-color",e),this.style.setProperty("--text-color",n),this.style.setProperty("--accent-color",r),this.style.setProperty("--switch-checked-color",r),this.style.setProperty("--switch-checked-button-color",r),this.style.setProperty("--switch-checked-track-color",r),this._backgroundColor=e,this._textColor=n,this._accentColor=r,t(null)}))})),this._transitionInProgress=!1,this.requestUpdate()}))}_updateStateFromHass(){if(this.hass&&this.config){const t=this.hass.states[this.config.entity];if(t){const e="on"===t.state,n=t.attributes.effect||"No effect";this._isOn===e&&this._currentEffect===n||(this._isOn=e,this._currentEffect=n,this._updateBrightness(),this.requestUpdate())}}}updated(t){super.updated(t),console.debug("HyperLightCard: updated called",t),console.debug("HyperLightCard: current state:",{isOn:this._isOn,currentEffect:this._currentEffect,brightness:this._brightness,isDropdownOpen:this._isDropdownOpen}),(t.has("hass")||t.has("config"))&&this._debouncedUpdate()}_updateBrightness(){if(console.debug("HyperLightCard: _updateBrightness called"),this.hass&&this.config){const t=this.hass.states[this.config.entity];if(t&&t.attributes.brightness){const e=Math.round((Number(t.attributes.brightness)-3)/252*100);this._brightness!==e&&(this._brightness=e,console.debug("HyperLightCard: Brightness updated",this._brightness),this.requestUpdate())}else console.debug("HyperLightCard: No brightness attribute found")}}render(){if(console.debug("HyperLightCard: render called with state:",{isOn:this._isOn,currentEffect:this._currentEffect,brightness:this._brightness,isDropdownOpen:this._isDropdownOpen}),!this.hass||!this.config)return console.debug("HyperLightCard: hass or config not available"),G``;const t=this.hass.states[this.config.entity];if(!t)return console.debug("HyperLightCard: Entity not found",this.config.entity),G`
        <ha-card>
          <div class="card">Entity not found: ${this.config.entity}</div>
        </ha-card>
      `;console.debug("HyperLightCard: Rendering with state",{isOn:this._isOn,currentEffect:this._currentEffect,brightness:this._brightness});const e={"--slider-color":this._accentColor};return requestAnimationFrame((()=>{this._isDropdownOpen&&(this._scrollToCurrentEffect(),this._highlightCurrentEffect())})),G`
      <ha-card>
        <div
          class="card"
          style="
            --background-color: ${this._backgroundColor};
            --text-color: ${this._textColor};
            --accent-color: ${this._accentColor};
          "
        >
          ${this._renderBackground(t)} ${this._renderHeader(t)}
          ${this._renderEffectDropdown(t)}
          ${this._showEffectInfo?this._renderEffectInfo(t):""}
          <div class="controls-row">
            ${this._renderBrightnessSlider(e)}
            ${this._showEffectParameters?this._renderAttributesToggle():""}
          </div>
          ${this._showEffectParameters?this._renderAttributes(t):""}
        </div>
      </ha-card>
    `}_renderBackground(t){const e=t.attributes.effect_image?`url(${t.attributes.effect_image})`:"none";return console.debug("HyperLightCard: Rendering background",e),G`
      <div
        class="card-background"
        style="background-image: ${e}; opacity: ${this.config.background_opacity};"
        aria-hidden="true"
      ></div>
    `}_renderHeader(t){const e=this.config.name||t.attributes.friendly_name||t.entity_id;return console.debug("HyperLightCard: Rendering header",e),G`
      <div class="header" aria-label="${e}">
        <div class="light-icon ${this._isOn?"light-on":""}">
          ${this.config.icon&&this.config.icon.startsWith("mdi:")?G`<ha-icon
                icon="${this.config.icon}"
                aria-hidden="true"
              ></ha-icon>`:G`<img src="${this.config.icon}" alt="${e}" />`}
        </div>
        <div class="light-name" title="${e}">${e}</div>
        <ha-switch
          .checked=${this._isOn}
          @change=${this._toggleLight}
          aria-label="Toggle light"
        ></ha-switch>
      </div>
    `}_renderEffectDropdown(t){const e=Array.isArray(t.attributes.effect_list)?t.attributes.effect_list:[];return console.debug("HyperLightCard: Rendering effect dropdown",e),G`
      <div class="effect-select-wrapper">
        <div class="dropdown ${this._isDropdownOpen?"open":""}">
          <div
            class="dropdown-header"
            @click=${this._toggleDropdown}
            aria-label="Current effect: ${this._currentEffect}"
            role="button"
          >
            ${this._currentEffect}
          </div>
          <div class="dropdown-content" role="menu">
            ${e.map((t=>G`
                <div
                  class="dropdown-item"
                  @click=${()=>this._selectEffect(t)}
                  role="menuitem"
                  tabindex="0"
                >
                  ${t}
                </div>
              `))}
          </div>
        </div>
      </div>
    `}_renderEffectInfo(t){if(!this._showEffectInfo)return G``;const e=t.attributes.effect_description||"No effect description available",n=t.attributes.effect_publisher||"Unknown publisher",r=t.attributes.effect_uses_audio||!1,o=t.attributes.effect_uses_input||!1,i=t.attributes.effect_uses_video||!1;return console.debug("HyperLightCard: Rendering effect info",{description:e,publisher:n,usesAudio:r,usesInput:o,usesVideo:i}),G`
      <div class="effect-info ${this._isOn?"visible":""}">
        <div class="effect-info-text">
          <div class="effect-description">${e}</div>
          <div class="effect-publisher">Published by: ${n}</div>
        </div>
        <div class="effect-features" aria-label="Effect features">
          ${r?G`<ha-icon
                icon="mdi:volume-high"
                title="Uses Audio"
                aria-label="Uses Audio"
              ></ha-icon>`:""}
          ${o?G`<ha-icon
                icon="mdi:gamepad-variant"
                title="Uses Input"
                aria-label="Uses Input"
              ></ha-icon>`:""}
          ${i?G`<ha-icon
                icon="mdi:video"
                title="Uses Video"
                aria-label="Uses Video"
              ></ha-icon>`:""}
        </div>
      </div>
    `}_renderBrightnessSlider(t){const e=Object.assign(Object.assign({},t),{"--slider-percentage":`${this._brightness}%`,"--slider-color":this._accentColor});return console.debug("HyperLightCard: Rendering brightness slider",e),G`
      <div
        class="brightness-slider"
        style=${vt(e)}
        role="slider"
        aria-valuemin="1"
        aria-valuemax="100"
        aria-valuenow="${this._brightness}"
      >
        <ha-icon icon="mdi:brightness-6" aria-hidden="true"></ha-icon>
        <input
          type="range"
          min="1"
          max="100"
          .value=${this._brightness.toString()}
          @change=${this._handleBrightnessChange}
          @input=${this._handleBrightnessChange}
          aria-label="Adjust brightness"
        />
      </div>
    `}_renderAttributesToggle(){return console.debug("HyperLightCard: Rendering attributes toggle"),G`
      <div
        class="attributes-toggle"
        @click=${this._toggleAttributes}
        role="button"
        aria-expanded="${this._isAttributesExpanded}"
        aria-label="Toggle effect parameters"
      >
        <ha-icon icon="mdi:chevron-down"></ha-icon>
      </div>
    `}_renderAttributes(t){if(!this._showEffectParameters)return G``;const e=t.attributes.effect_parameters;return e&&0!==Object.keys(e).length?(console.debug("HyperLightCard: Rendering attributes",e),G`
      <div
        class="attributes ${this._isAttributesExpanded?"expanded":""}"
        aria-hidden="${!this._isAttributesExpanded}"
      >
        <div class="attributes-content">
          ${this._renderAttributesList(e)}
        </div>
      </div>
    `):(console.debug("HyperLightCard: No effect parameters to render"),G``)}_renderAttributesList(t){return t&&0!==Object.keys(t).length?(console.debug("HyperLightCard: Rendering attributes list",t),G`
      <ul class="attribute-list">
        ${Object.entries(t).map((t=>{let[e,n]=t;return G`
            <li class="attribute-item">
              <span class="attribute-key">${function(t){return t.split("_").map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join(" ")}(e)}:</span>
              <span class="attribute-value"
                >${function(t){return"boolean"==typeof t?t?"Yes":"No":"number"==typeof t?t.toFixed(2):t}(n)}</span
              >
            </li>
          `}))}
      </ul>
    `):(console.debug("HyperLightCard: No effect parameters to list"),G`<p>No effect parameters available.</p>`)}_toggleLight(){console.debug("HyperLightCard: _toggleLight called"),this._isOn=!this._isOn,this.hass.callService("light",this._isOn?"turn_on":"turn_off",{entity_id:this.config.entity});const t=this.shadowRoot.querySelector(".effect-info");t&&(this._isOn?setTimeout((()=>{t.classList.add("visible"),console.debug("HyperLightCard: Effect info made visible")}),50):(t.classList.remove("visible"),console.debug("HyperLightCard: Effect info hidden"))),console.debug("HyperLightCard: Light toggled, new state:",this._isOn),this.requestUpdate()}_getCurrentEffectIndex(){var t,e,n;const r=null===(t=this.hass)||void 0===t?void 0:t.states[null!==(n=null===(e=this.config)||void 0===e?void 0:e.entity)&&void 0!==n?n:""];return(Array.isArray(null==r?void 0:r.attributes.effect_list)?null==r?void 0:r.attributes.effect_list:[]).indexOf(this._currentEffect)}_scrollToCurrentEffect(){requestAnimationFrame((()=>{const t=this.shadowRoot.querySelector(".dropdown-content"),e=null==t?void 0:t.querySelector(`.dropdown-item:nth-child(${this._getCurrentEffectIndex()+1})`);e&&(e.scrollIntoView({block:"nearest"}),console.debug("HyperLightCard: Current effect scrolled into view"))}))}_highlightCurrentEffect(){const t=this.shadowRoot.querySelector(".dropdown-content");((null==t?void 0:t.querySelectorAll(".dropdown-item"))||[]).forEach((t=>{var e;t.classList.remove("selected"),(null===(e=t.textContent)||void 0===e?void 0:e.trim())===this._currentEffect&&t.classList.add("selected")})),console.debug("HyperLightCard: Highlighted current effect")}_toggleDropdown(t){console.debug("HyperLightCard: _toggleDropdown called"),t.stopPropagation(),this._isDropdownOpen=!this._isDropdownOpen,console.debug("HyperLightCard: Dropdown toggled, new state:",this._isDropdownOpen),this._isDropdownOpen&&this._scrollToCurrentEffect(),this.requestUpdate()}_selectEffect(t){return n(this,void 0,void 0,(function*(){console.debug("HyperLightCard: _selectEffect called",t),this._currentEffect=t,this._isDropdownOpen=!1,this.requestUpdate(),this._isOn?(yield this.hass.callService("light","turn_on",{entity_id:this.config.entity,effect:t}),console.debug("HyperLightCard: Effect applied via service call")):console.debug("HyperLightCard: Light is off, effect not applied")}))}_toggleAttributes(){console.debug("HyperLightCard: _toggleAttributes called"),this._isAttributesExpanded=!this._isAttributesExpanded,console.debug("HyperLightCard: Attributes expanded:",this._isAttributesExpanded),this.requestUpdate()}_handleClickOutside(t){console.debug("HyperLightCard: _handleClickOutside called");const e=t.composedPath();this._isDropdownOpen&&!e.includes(this.shadowRoot.querySelector(".dropdown"))&&(this._isDropdownOpen=!1,console.debug("HyperLightCard: Dropdown closed due to outside click"),this.requestUpdate())}_handleBrightnessChange(t){return n(this,void 0,void 0,(function*(){console.debug("HyperLightCard: _handleBrightnessChange called");const e=t.target,n=Number(e.value);if(this._brightness=n,this.hass&&this.config){const t=Math.round(n/100*252)+3;yield this.hass.callService("light","turn_on",{entity_id:this.config.entity,brightness:t}),console.debug("HyperLightCard: Brightness updated",{brightness:n,haBrightness:t})}this.requestUpdate()}))}_debounce(t,e){let n;return function(){clearTimeout(n),n=window.setTimeout(t,e)}}_setupMutationObserver(){const t=document.querySelector(`ha-state-icon[data-entity="${this.config.entity}"]`);if(t){new MutationObserver((t=>{t.forEach((t=>{"attributes"===t.type&&"icon"===t.attributeName&&this._debouncedUpdate()}))})).observe(t,{attributes:!0})}}connectedCallback(){super.connectedCallback(),document.addEventListener("click",this._clickOutsideHandler),console.debug("HyperLightCard: connectedCallback called, click listener added")}disconnectedCallback(){super.disconnectedCallback(),document.removeEventListener("click",this._clickOutsideHandler),console.debug("HyperLightCard: disconnectedCallback called, click listener removed")}}t([ft({type:Object}),e("design:type",Object)],Ct.prototype,"hass",void 0),t([ft({type:Object}),e("design:type",Object)],Ct.prototype,"config",void 0),t([ft({type:Boolean,attribute:!1}),e("design:type",Object)],Ct.prototype,"_isOn",void 0),t([ft({type:String,attribute:!1}),e("design:type",Object)],Ct.prototype,"_currentEffect",void 0),t([ft({type:Boolean,attribute:!1}),e("design:type",Object)],Ct.prototype,"_isDropdownOpen",void 0),t([ft({type:Boolean,attribute:!1}),e("design:type",Object)],Ct.prototype,"_isAttributesExpanded",void 0),t([ft({type:String,attribute:!1}),e("design:type",Object)],Ct.prototype,"_backgroundColor",void 0),t([ft({type:String,attribute:!1}),e("design:type",Object)],Ct.prototype,"_textColor",void 0),t([ft({type:String,attribute:!1}),e("design:type",Object)],Ct.prototype,"_accentColor",void 0),t([ft({type:Boolean,attribute:!1}),e("design:type",Object)],Ct.prototype,"_showEffectInfo",void 0),t([ft({type:Boolean,attribute:!1}),e("design:type",Object)],Ct.prototype,"_showEffectParameters",void 0),t([function(t){return ft({...t,state:!0,attribute:!1})}(),e("design:type",Number)],Ct.prototype,"_brightness",void 0),customElements.define("hyper-light-card",Ct);console.log("%c  hyper-light-card v0.8.0 launched!  ","background: linear-gradient(90deg, #000033 0%, #0033cc 50%, #6600cc 100%); color: #00ffff; font-weight: bold; padding: 5px 10px; border-radius: 5px; text-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px #fff, 0 0 20px #00ffff, 0 0 35px #00ffff, 0 0 40px #00ffff, 0 0 50px #00ffff, 0 0 75px #00ffff;");
//# sourceMappingURL=hyper-light-card.js.map
